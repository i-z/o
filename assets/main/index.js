System.register("chunks:///_virtual/ConfirmationWindow.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Window.ts"],(function(n){"use strict";var o,i,t,e;return{setters:[function(n){o=n.inheritsLoose},function(n){i=n.cclegacy,t=n._decorator},function(n){e=n.default}],execute:function(){var r;n("ConfirmationWindowEventType",void 0),i._RF.push({},"0a2d84WTTRNha0II2zjiFEm","ConfirmationWindow",void 0);var c,s=t.ccclass;t.property;!function(n){n.YES="yes",n.NO="no"}(c||(c=n("ConfirmationWindowEventType",{})));n("ConfirmationWindow",s("ConfirmationWindow")(r=function(n){function i(){return n.apply(this,arguments)||this}o(i,n);var t=i.prototype;return t.yesTouch=function(){this.node.emit(c.YES),this.close()},t.noTouch=function(){this.node.emit(c.NO),this.close()},i}(e))||r);i._RF.pop()}}}));

System.register("chunks:///_virtual/TestDropListButton.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./DropListButton.ts"],(function(t){"use strict";var e,n,o,r,s;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t._decorator,r=t.Component},function(t){s=t.DropListButton}],execute:function(){var i;n._RF.push({},"0d2b0hkUmFJP7+Dk3sgc1sI","TestDropListButton",void 0);var u=o.ccclass;o.property,t("TestDropButton",u("TestDropButton")(i=function(t){function n(){return t.apply(this,arguments)||this}return e(n,t),n.prototype.start=function(){this.getComponentInChildren(s).setData([{id:0,name:"New1"},{id:0,name:"Big"},{id:0,name:"Large",markered:!0},{id:0,name:"New"},{id:0,name:"List"},{id:0,name:"Down"}])},n}(r))||i);n._RF.pop()}}}));

System.register("chunks:///_virtual/FadeWindowTransition.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./WindowTransitionBase.ts"],(function(n){"use strict";var t,i,o,e,r,a,s;return{setters:[function(n){t=n.inheritsLoose},function(n){i=n.cclegacy,o=n._decorator,e=n.UIOpacity,r=n.assert,a=n.tween},function(n){s=n.WindowTransitionBase}],execute:function(){var c;i._RF.push({},"0f091/sgkVJEKPw9CKR2Oj4","FadeWindowTransition",void 0);var u=o.ccclass;o.property,n("FadeWindowTransition",u("FadeWindowTransition")(c=function(n){function i(){return n.apply(this,arguments)||this}t(i,n);var o=i.prototype;return o.open=function(n){var t=n.getComponent(e);return r(t,"FadeWindowTransition requires UIOpacity"),t.opacity=0,new Promise((function(n){a(t).to(.15,{opacity:255}).call(n).start()}))},o.close=function(n){var t=n.getComponent(e);return r(t,"FadeWindowTransition requires UIOpacity"),new Promise((function(n){a(t).to(.15,{opacity:0}).call(n).start()}))},i}(s))||c);i._RF.pop()}}}));

System.register("chunks:///_virtual/SettingsWindow.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Window.ts","./LocalSettings.ts"],(function(t){"use strict";var i,n,e,o,s,r,a,c,l,u,g,f;return{setters:[function(t){i=t.applyDecoratedDescriptor,n=t.inheritsLoose,e=t.initializerDefineProperty,o=t.assertThisInitialized,s=t.defineProperty,r=t.createClass},function(t){a=t.cclegacy,c=t._decorator,l=t.ToggleContainer,u=t.log},function(t){g=t.default},function(t){f=t.InitialZoomType}],execute:function(){var h,p,d,_,S;t("SettingsWindowEventType",void 0),a._RF.push({},"0fb52uWkMhDJrm91FQxsRiO","SettingsWindow",void 0);var m,y=c.ccclass,v=c.property;!function(t){t.SAVE_SETTINGS="save_settings"}(m||(m=t("SettingsWindowEventType",{})));t("SettingsWindow",(h=y("SettingsWindow"),p=v(l),h((S=i((_=function(t){function i(){for(var i,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return i=t.call.apply(t,[this].concat(r))||this,e(o(i),"initalZoom",S,o(i)),s(o(i),"_settings",void 0),i}n(i,t);var a=i.prototype;return a.changeInitialZoom=function(t){u(t),this._settings.initialZoom=f[t.node.name],u(this._settings)},a.okTouch=function(){this.node.emit(m.SAVE_SETTINGS,this._settings),this.close()},a.updateSettings=function(t){var i=this;this._settings=t,this.initalZoom.toggleItems.forEach((function(t,n){f[i._settings.initialZoom]===t.node.name&&(t.isChecked=!0)}))},r(i,[{key:"settings",get:function(){return this._settings},set:function(t){this._settings=t}}]),i}(g)).prototype,"initalZoom",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=_))||d));a._RF.pop()}}}));

System.register("chunks:///_virtual/MetaDataEntity.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./StringUtils.ts"],(function(t){"use strict";var e,a,i,n;return{setters:[function(t){e=t.createClass,a=t.defineProperty},function(t){i=t.cclegacy},function(t){n=t.hashCode}],execute:function(){i._RF.push({},"2712bXE/HxPQq9rI8/AHVia","MetaDataEntity",void 0);t("MetaDataEntity",function(){function t(t,e,i){a(this,"_key",void 0),a(this,"_data",void 0),a(this,"_metaChanged",null),this._key=t,this._data=e,this._metaChanged=i,this._data.favorites||(this._data.favorites=[]),this._data.deleted||(this._data.deleted=[])}var i=t.prototype;return i.addFavorite=function(t){this.has(t.url)||(this._data.favorites.push(t),this.raiseMetaChanged())},i.addFavoriteWithIdx=function(t,e){this.addFavorite({index:t,url:e,hash:n(e)})},i.removeFromFavorites=function(t){var e=this._data.favorites.find((function(e){return e.index==t}));if(e){var a=this._data.favorites.indexOf(e);a>=0&&this._data.favorites.splice(a,1)}this.raiseMetaChanged()},i.removeFromFavoritesUrl=function(t){var e=n(t),a=this._data.favorites.find((function(t){return t.hash==e}));if(a){var i=this._data.favorites.indexOf(a);i>=0&&this._data.favorites.splice(i,1)}this.raiseMetaChanged()},i.delete=function(t){this._data.deleted.push(t),this.raiseMetaChanged()},i.restore=function(t){var e=this._data.deleted.indexOf(t);e>=0&&this._data.deleted.splice(e,1),this.raiseMetaChanged()},i.isLiked=function(t){return null!=this._data.favorites.find((function(e){return e.index==t}))},i.has=function(t){var e=n(t);return null!=this._data.favorites.find((function(t){return t.hash==e}))},i.isDeleted=function(t){return this._data.deleted.indexOf(t)>=0},i.raiseMetaChanged=function(){this._metaChanged&&this._metaChanged(this)},i.toJSON=function(){return JSON.stringify(this._data)},t.idEqual=function(t,e){if(t.firstUrls.length!=e.firstUrls.length)return!1;for(var a=0;a<t.firstUrls.length;a++)if(t.firstUrls[a]!=e.firstUrls[a])return!1;return!0},i.isEqualId=function(e){return t.idEqual(this._data.idData,e)},i.isNameFull=function(){var t;return!((null===(t=this._data.shelf)||void 0===t?void 0:t.length)>0)||this._data.name.startsWith(this._data.shelf)&&"_"==this._data.name[this._data.shelf.length]},i.makeNameFull=function(){this.isNameFull()||(this.name=this.shelf+"_"+this.name,this.raiseMetaChanged())},i.deletePermanently=function(t,e){var a=this,i=!1;this._data.currentIndex==t&&(this._data.currentIndex=0,i=!0),this._data.currentIndex>t&&(--this._data.currentIndex,i=!0),this._data.deleted.forEach((function(e,n){e==t&&(a._data.deleted.splice(t,1),i=!0),e>t&&(a._data.deleted[n]=--e,i=!0)})),this._data.favorites.forEach((function(e,a){e.index==t&&(e.index=-1,i=!0),e.index>t&&(--e.index,i=!0)})),i&&e&&this.raiseMetaChanged()},e(t,[{key:"key",get:function(){return this._key}},{key:"data",get:function(){return this._data},set:function(t){this._data=t,this.raiseMetaChanged()}},{key:"name",get:function(){var t;return null===(t=this._data)||void 0===t?void 0:t.name},set:function(t){this._data.name=t}},{key:"currentIndex",get:function(){return this._data.currentIndex},set:function(t){this._data.currentIndex=t,this.raiseMetaChanged()}},{key:"description",get:function(){return this.data.description},set:function(t){this.data.description=t,this.raiseMetaChanged()}},{key:"shelf",get:function(){return this.data.shelf},set:function(t){this.data.shelf=t,this.raiseMetaChanged()}},{key:"idData",get:function(){return this._data.idData}},{key:"favorites",get:function(){return this._data.favorites.map((function(t){return t.index}))}},{key:"deleted",get:function(){return this._data.deleted}}]),t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/FileInput.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,n,r,i,u,o,s,c,a;return{setters:[function(e){t=e.inheritsLoose,n=e.defineProperty,r=e.assertThisInitialized,i=e.createClass,u=e.asyncToGenerator},function(e){o=e.cclegacy,s=e._decorator,c=e.error,a=e.Component}],execute:function(){var l;e("FileInputEventType",void 0),o._RF.push({},"2fb0fupJslDXoHMP/NmR1Kr","FileInput",void 0);var p,f=s.ccclass;s.property;!function(e){e.DATA_RECEIVED="data_received"}(p||(p=e("FileInputEventType",{})));e("FileInput",f("FileInput")(l=function(e){function o(){for(var t,i=arguments.length,u=new Array(i),o=0;o<i;o++)u[o]=arguments[o];return t=e.call.apply(e,[this].concat(u))||this,n(r(t),"_input",null),n(r(t),"_currentFileName",""),n(r(t),"_resolve",null),n(r(t),"_rejection",null),t}t(o,e);var s=o.prototype;return s.start=function(){this._input=document.createElement("input"),this._input.id="inputFile",this._input.type="file",this._input.style.display="none",document.body.appendChild(this._input),this._input.addEventListener("change",this.getFileData.bind(this))},s.request=function(){var e=this;return this._input.click(),new Promise((function(t,n){e._resolve=t,e._rejection=n}))},s.getFileData=function(e){var t=this,n=e.target;"files"in n&&n.files.length>0&&(this._currentFileName=n.files[0].name,this.readFileContent(n.files[0]).then((function(e){t._resolve&&t._resolve(e)})).catch((function(e){t._rejection&&t._rejection(e),c(e)})))},s.readFileContent=function(){var e=u(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new FileReader,e.abrupt("return",new Promise((function(e,r){n.onload=function(t){return e(t.target.result)},n.onerror=function(e){return r(e)},n.readAsText(t)})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i(o,[{key:"currentFileName",get:function(){return this._currentFileName}}]),o}(a))||l);o._RF.pop()}}}));

System.register("chunks:///_virtual/DOMHelper.ts",["cc"],(function(e){"use strict";var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){e("downloadTextFromBrowser",(function(e,t){var n=document.createElement("a");n.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t)),n.setAttribute("download",e),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)})),t._RF.push({},"33ddcRL9fxIl5uIfbHp/Ugr","DOMHelper",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/FileMetaProvider.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./MetaDataEntity.ts"],(function(e){"use strict";var t,a,i,n,s,r,o,l;return{setters:[function(e){t=e.createForOfIteratorHelperLoose,a=e.createClass,i=e.defineProperty},function(e){n=e.cclegacy,s=e.error,r=e.log,o=e.sys},function(e){l=e.MetaDataEntity}],execute:function(){n._RF.push({},"35d96H04K5DCpA55bzP4609","FileMetaProvider",void 0);e("FileMetaProvider",function(){function e(){var e=this;i(this,"_metaFileProviderStorageKey","metaFilesKeys"),i(this,"_keyPrefix","m"),i(this,"_fileNameKey",new Map),i(this,"_filesMetas",new Map),i(this,"_newIdx",0),i(this,"_onDataChanged",void 0);var t=o.localStorage.getItem(this._metaFileProviderStorageKey),a=JSON.parse(t);for(var n in a){var s=void 0;s="string"==typeof a[n]?[a[n]]:a[n],this._fileNameKey.set(n,s),s.forEach((function(t){var a=t.substring(e._keyPrefix.length),i=parseInt(a);!isNaN(i)&&i>=e._newIdx&&(e._newIdx=i+1)}))}this._fileNameKey.forEach((function(t,a){t.forEach((function(t){var a=o.localStorage.getItem(t);a&&e._filesMetas.set(t,new l(t,JSON.parse(a),e.metaChanged.bind(e)))}))}))}var n=e.prototype;return n.raiseDataChanged=function(){this._onDataChanged&&this._onDataChanged()},n.metaChanged=function(e){if(e){for(var a,i=null,n=t(this._fileNameKey.keys());!(a=n()).done;){var o=a.value;this._fileNameKey.get(o).indexOf(e.key)>=0&&(i=o)}if(null==i&&s("ERROR > metaChanged"),i==e.name)localStorage.setItem(e.key,e.toJSON());else{r(i);var l=this._fileNameKey.get(i);l.splice(l.indexOf(e.key),1);var f=this._fileNameKey.get(e.name);f?f.push(e.key):this._fileNameKey.set(e.name,[e.key])}}this.raiseDataChanged()},n.getFileMeta=function(e,a){var i=null,n=this._fileNameKey.get(e);if(n)for(var s,r=t(n);!(s=r()).done;){var o=s.value;if(o){var l=this._filesMetas.get(o);if(l.isEqualId(a)){i=l;break}}}if(!i){var f=""+this._keyPrefix+this._newIdx;n?n.push(f):this._fileNameKey.set(e,[f]),this._newIdx++,i=this.createFileMeta(f,e,a)}return this.save(),i},n.createFileMeta=function(e,t,a){var i=new l(e,{name:t,idData:a},this.metaChanged.bind(this));return this._filesMetas.set(e,i),i},n.mapToJson=function(e){var t={};return e.forEach((function(e,a){return t[a]=e})),JSON.stringify(t)},n.save=function(){var e=this;localStorage.setItem(this._metaFileProviderStorageKey,this.mapToJson(this._fileNameKey)),this._filesMetas.forEach((function(t,a){e.metaChanged(t)}))},n.removeFileMeta=function(e){this._filesMetas.delete(e.key),localStorage.removeItem(e.key);var t=this._fileNameKey.get(e.name);t&&(t.splice?t.splice(t.indexOf(e.key),1):this._fileNameKey.delete(e.name)),this.save(),this.raiseDataChanged()},n.removeAllData=function(){this._filesMetas.forEach((function(e){return localStorage.removeItem(e.key)})),this._filesMetas=new Map,localStorage.removeItem(this._metaFileProviderStorageKey),this._fileNameKey=new Map,this._newIdx=0,this.raiseDataChanged()},n.addOrUpdate=function(e,t){var a=e;".json"==e.slice(e.length-5)&&(a=e.slice(0,e.length-5)),r("addOrUpdate >> "+a);var i=JSON.parse(t);if(i){var n=this.getFileMeta(i.name,i.idData);n&&(n.data=i)}},a(e,[{key:"onDataChanged",get:function(){return this._onDataChanged},set:function(e){this._onDataChanged=e}},{key:"files",get:function(){return Array.from(this._fileNameKey.keys())}},{key:"entities",get:function(){return Array.from(this._filesMetas.values())}}]),e}());n._RF.pop()}}}));

System.register("chunks:///_virtual/WindowDirector.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./WindowManager.ts"],(function(n){"use strict";var i,t,e,o,a,r,s;return{setters:[function(n){i=n.defineProperty,t=n.createClass},function(n){e=n.cclegacy,o=n._decorator,a=n.director,r=n.assert},function(n){s=n.WindowManager}],execute:function(){var d,c,w;e._RF.push({},"3da0eUnbcxAo7Va1DBKt7rb","WindowDirector",void 0);var l=o.ccclass;o.property,n("default",l("WindowDirector")((w=c=function(){function n(){i(this,"_initialized",!1),i(this,"_windowManager",null)}var e=n.prototype;return e.init=function(){if(!this._initialized){var n=a.getScene().getComponentsInChildren(s);r(n,"Can't find WindowManager"),r(1==n.length,"WindowManager has to be single"),this._windowManager=n[0],this._initialized=!0}},e.openWindow=function(n){return r(this._initialized,"WindowManager not initilized"),r(this._windowManager,"WindowManager doesn't exist"),this._windowManager.openWindow(n)},e.closeWindow=function(n){r(this._initialized,"WindowManager not initilized"),r(this._windowManager,"WindowManager doesn't exist"),this._windowManager.closeWindow(n)},e.getWindow=function(n){return r(this._initialized,"WindowManager not initilized"),r(this._windowManager,"WindowManager doesn't exist"),this._windowManager.getWindow(n)},t(n,null,[{key:"instance",get:function(){return this._instance||(this._instance=new this)}}]),n}(),i(c,"_instance",null),d=w))||d);e._RF.pop()}}}));

System.register("chunks:///_virtual/FavoritesProvider.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./MetaDataEntity.ts"],(function(t){"use strict";var e,a,n,i,s;return{setters:[function(t){e=t.createClass,a=t.defineProperty},function(t){n=t.cclegacy,i=t.sys},function(t){s=t.MetaDataEntity}],execute:function(){n._RF.push({},"45191z6yWNETYMCUpXpm5yb","FavoritesProvider",void 0);t("FavoritesProvider",function(){function t(){var t=this;a(this,"_favoritesStorageKey","favoritesKeys"),a(this,"_keyPrefix","f"),a(this,"_nameKey",new Map),a(this,"_keyData",new Map),a(this,"_newIdx",0),a(this,"_onDataChanged",void 0);var e=i.localStorage.getItem(this._favoritesStorageKey),n=JSON.parse(e);for(var r in n){var h=n[r];this._nameKey.set(r,h);var o=h.substr(this._keyPrefix.length,h.length-this._keyPrefix.length),y=parseInt(o);!isNaN(y)&&y>=this._newIdx&&(this._newIdx=y+1)}this._nameKey.forEach((function(e,a){var n=i.localStorage.getItem(e);n&&t._keyData.set(e,new s(e,JSON.parse(n),t.metaChanged.bind(t)))}))}var n=t.prototype;return n.raiseDataChanged=function(){this._onDataChanged&&this._onDataChanged()},n.metaChanged=function(t){t&&localStorage.setItem(t.key,t.toJSON()),this.raiseDataChanged()},n.getMetaDataEntity=function(t){var e=null,a=this._nameKey.get(t);if(a)(e=this._keyData.get(a))||(e=this.createMetaDataEntity(a,t),this.raiseDataChanged());else{var n=""+this._keyPrefix+this._newIdx;this._nameKey.set(t,n),this._newIdx++,e=this.createMetaDataEntity(n,t),this.raiseDataChanged()}return this.save(),e},n.removeMetaDataEntityWithName=function(t){var e=this._nameKey.get(t);this._nameKey.delete(t),e&&(this._keyData.delete(e),i.localStorage.removeItem(e)),this.raiseDataChanged(),this.save()},n.renameMetaDataEntityWithName=function(t,e){var a=this._nameKey.get(t);if(a){this._nameKey.delete(t),this._nameKey.set(e,a);var n=this._keyData.get(a);n&&(n.name=e)}this.raiseDataChanged(),this.save()},n.createMetaDataEntity=function(t,e){var a=new s(t,{name:e},this.metaChanged.bind(this));return this._keyData.set(t,a),a},n.mapToJson=function(t){var e={};return t.forEach((function(t,a){return e[a]=t})),JSON.stringify(e)},n.save=function(){var t=this;localStorage.setItem(this._favoritesStorageKey,this.mapToJson(this._nameKey)),this._keyData.forEach((function(e,a){t.metaChanged(e)}))},n.toJSON=function(){var t=this,e={lists:[]};return this._nameKey.forEach((function(a,n){var i=t._keyData.get(a);i&&(i.name=n,e.lists.push(i.data))})),JSON.stringify(e)},n.addFromJSON=function(t){var e=this;JSON.parse(t).lists.forEach((function(t){var a;if((null===(a=t.name)||void 0===a?void 0:a.length)>0){var n=e.getMetaDataEntity(t.name);if(n)t.favorites.forEach((function(t){return n.addFavorite(t)})),n.currentIndex=t.currentIndex;else{var i=""+e._keyPrefix+e._newIdx;e._nameKey.set(t.name,i),e._newIdx++;var r=new s(i,t,e.metaChanged.bind(e));e._keyData.set(i,r)}}})),this.save()},e(t,[{key:"onDataChanged",get:function(){return this._onDataChanged},set:function(t){this._onDataChanged=t}},{key:"names",get:function(){return Array.from(this._nameKey.keys())}},{key:"entities",get:function(){return Array.from(this._keyData.values())}}]),t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/FavoritesWindow.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Window.ts","./ConfirmationHelper.ts","./ListScrollView.ts"],(function(t){"use strict";var i,e,n,s,o,r,a,l,c,d,u,_,h;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,s=t.assertThisInitialized,o=t.defineProperty,r=t.createClass},function(t){a=t.cclegacy,l=t._decorator,c=t.EditBox},function(t){d=t.default},function(t){u=t.ConfirmationHelper},function(t){_=t.ListScrollView,h=t.ListScrollViewEvent}],execute:function(){var L,f,v,p,E,m,w;t("FavoritesWindowEventType",void 0),a._RF.push({},"455cePRwcZOcopMZYLQoCDS","FavoritesWindow",void 0);var S,g=l.ccclass,A=l.property;!function(t){t.SAVE_SETTINGS="save_settings",t.ADD_NEW_LIST="add_new_list",t.REMOVE_LIST="remove_list",t.RENAME_LIST="rename_list",t.DOWNLOAD_ALL_FAVORITES="download_all_favorites",t.UPLOAD_SEVERAL_FAVORITES="upload_several_favorites"}(S||(S=t("FavoritesWindowEventType",{})));t("FavoritesWindow",(L=g("FavoritesWindow"),f=A(c),v=A(_),L((m=i((E=function(t){function i(){for(var i,e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return i=t.call.apply(t,[this].concat(r))||this,n(s(i),"newListName",m,s(i)),n(s(i),"lists",w,s(i)),o(s(i),"_data",null),o(s(i),"_confirm",null),o(s(i),"_settings",void 0),i}e(i,t);var a=i.prototype;return a.onLoad=function(){var i=this;t.prototype.onLoad.call(this),this._confirm=this.getComponent(u),this.lists.node.on(h.SELECT_SINGLE_ITEM,(function(t){i._data&&i._data[t]&&(i.newListName.string=i._data[t])}))},a.addNewList=function(){var t;(null===(t=this.newListName.string)||void 0===t?void 0:t.length)>0&&(this.node.emit(S.ADD_NEW_LIST,this.newListName.string),this.newListName.string="")},a.removeList=function(){var t=this;this.lists.selectedIndex>=0&&this._confirm.confirm((function(){t.node.emit(S.REMOVE_LIST,t._data[t.lists.selectedIndex])}))},a.renameList=function(){var t;this.lists.selectedIndex>=0&&(null===(t=this.newListName.string)||void 0===t?void 0:t.length)>0&&this._data[this.lists.selectedIndex]!=this.newListName.string&&this.node.emit(S.RENAME_LIST,this._data[this.lists.selectedIndex],this.newListName.string)},a.downloadAllFavorites=function(){this.node.emit(S.DOWNLOAD_ALL_FAVORITES)},a.uploadServeralFavorites=function(){this.node.emit(S.UPLOAD_SEVERAL_FAVORITES)},a.okTouch=function(){this.node.emit(S.SAVE_SETTINGS,this._settings),this.close()},a.setLists=function(t){this._data=t,this.lists.setData(t)},r(i,[{key:"settings",get:function(){return this._settings},set:function(t){this._settings=t}}]),i}(d)).prototype,"newListName",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=i(E.prototype,"lists",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=E))||p));a._RF.pop()}}}));

System.register("chunks:///_virtual/FileIdentificationData.ts",["cc"],(function(){"use strict";var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"456afdO8lVC36xQ5GZXPec9","FileIdentificationData",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/WindowManager.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./WindowTransitionBase.ts","./Window.ts"],(function(i){"use strict";var n,t,e,o,r,a,s,d,w,u,l,c,h,f,p,v,g;return{setters:[function(i){n=i.applyDecoratedDescriptor,t=i.initializerDefineProperty,e=i.inheritsLoose,o=i.assertThisInitialized,r=i.defineProperty},function(i){a=i.cclegacy,s=i._decorator,d=i.Node,w=i.log,u=i.assert,l=i.view,c=i.UIOpacity,h=i.tween,f=i.Component},function(i){p=i.WindowTransitionBase},function(i){v=i.default,g=i.WindowBehaviour}],execute:function(){var _,W,m,y,b,C,M,k,z,T,A,D,O;a._RF.push({},"4ff4duuGkhEcYKER81Ssf0B","WindowManager",void 0);var S=s.ccclass,L=s.property,B=i("WindowNode",(_=S("WindowNode"),W=L(d),_((b=n((y=function(){t(this,"name",b,this),t(this,"window",C,this)}).prototype,"name",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),C=n(y.prototype,"window",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=y))||m));i("WindowManager",(M=S("WindowManager"),k=L([B]),z=L(d),M((D=n((A=function(i){function n(){for(var n,e=arguments.length,a=new Array(e),s=0;s<e;s++)a[s]=arguments[s];return n=i.call.apply(i,[this].concat(a))||this,t(o(n),"windows",D,o(n)),t(o(n),"darkCover",O,o(n)),r(o(n),"_defaultTransition",null),r(o(n),"_activeWindows",new Map),r(o(n),"_windows",new Array),n}e(n,i);var a=n.prototype;return a.start=function(){this._defaultTransition=this.getComponent(p),this._defaultTransition||w("WindowManager's default transition is not set"),this.windows.forEach((function(i){return i.window.active=!1}))},a.openWindow=function(i){var n=this.windows.find((function(n){return n.name==i}));if(!n)return u(!1,"Can't find window "+i),null;if(this._activeWindows.get(i))return w("Window "+i+" already in use"),null;var t=n.window.getComponent(v);if(t||(t=n.window.addComponent(v)),this._windows.length>0&&this._windows[this._windows.length-1].behaviour==g.MODAL&&t.behaviour!=g.MODAL_MESSAGE)return w("Modal window prevents from opening other windows"),null;if(t.name=i,!t.show(this._defaultTransition))return null;t.node.parent.active=!0;var e=l.getVisibleSize(),o=t.windowSize;if(e.width<o.width&&(o.width=e.width),e.height<o.height&&(o.height=e.height),t.windowSize=o,this._activeWindows.set(i,t),this._windows.push(t),t.behaviour==g.MODAL){var r=this.darkCover.getComponent(c);u(r,"WindowManager's darkCover requires UIOpacity component"),r.opacity=0,this.darkCover.active=!0,h(r).to(.15,{opacity:255}).start()}return t},a.closeWindow=function(i){var n=this;if(this.windows.find((function(n){return n.name==i}))){var t=this._activeWindows.get(i);if(t){if(t.hide(this._defaultTransition)){if(t.behaviour==g.MODAL&&t===this._windows[this._windows.length-1]){var e=this.darkCover.getComponent(c);u(e,"WindowManager's darkCover requires UIOpacity component"),h(e).to(.15,{opacity:0}).call((function(){return n.darkCover.active=!1})).start()}this._activeWindows.delete(i),this._windows=this._windows.filter((function(n){return n.name!=i}))}}else w("Window "+i+" already closed")}else u(!1,"Can't find window "+i)},a.getWindow=function(i){var n=this.windows.find((function(n){return n.name==i}));return n?n.window.getComponent(v):(u(!1,"Can't find window "+i),null)},n}(f)).prototype,"windows",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),O=n(A.prototype,"darkCover",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=A))||T));a._RF.pop()}}}));

System.register("chunks:///_virtual/ListItem.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,i,r,n,o,s,a,c,l,u,d;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,r=t.defineProperty,n=t.assertThisInitialized,o=t.initializerDefineProperty,s=t.createClass},function(t){a=t.cclegacy,c=t._decorator,l=t.Label,u=t.UITransform,d=t.Component}],execute:function(){var p,f,h,x,m,g,I;t("ListItemEvent",void 0),a._RF.push({},"5003fYUJ8hHAaZdiS8xFMfE","ListItem",void 0);var v,y=c.ccclass,b=c.property;!function(t){t.SELECT="select"}(v||(v=t("ListItemEvent",{})));t("ListItem",(p=y("ListItem"),f=b(l),p((m=e((x=function(t){function e(){for(var e,i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return e=t.call.apply(t,[this].concat(s))||this,r(n(e),"_idx",void 0),o(n(e),"text",m,n(e)),o(n(e),"addIdxToString",g,n(e)),o(n(e),"startIdxFromZero",I,n(e)),e}i(e,t);var a=e.prototype;return a.start=function(){},a.init=function(){this.node.getComponent(u).anchorX=0},a.setString=function(t,e,i){this._idx=t;var r=t;this.addIdxToString?((null==i?void 0:i.id)&&(r=i.id),this.startIdxFromZero?this.text.string=" "+r+" "+e:this.text.string=" "+(r+1)+" "+e):this.text.string=e},a.select=function(t){this.node.emit(v.SELECT,this._idx,t.isChecked)},s(e,[{key:"index",get:function(){return this._idx}}]),e}(d)).prototype,"text",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=e(x.prototype,"addIdxToString",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),I=e(x.prototype,"startIdxFromZero",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),h=x))||h));a._RF.pop()}}}));

System.register("chunks:///_virtual/ScreenDirector.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./ScreenManager.ts","./TransitionBase.ts"],(function(n){"use strict";var e,t,r,i,a,s,c,o;return{setters:[function(n){e=n.defineProperty,t=n.createClass},function(n){r=n.cclegacy,i=n._decorator,a=n.director,s=n.assert},function(n){c=n.ScreenManager},function(n){o=n.TransitionBase}],execute:function(){var u,l,f;r._RF.push({},"50e8dM3+fVNJrXX/28mGtRt","ScreenDirector",void 0);var h=i.ccclass;i.property,n("default",h("ScreenDirector")((f=l=function(){function n(){e(this,"_initialized",!1),e(this,"_screenManager",null),e(this,"_defaultTransition",null)}var r=n.prototype;return r.init=function(){if(!this._initialized){var n=a.getScene().getComponentsInChildren(c);s(n,"Can't find ScreenManager"),s(1==n.length,"ScreenManager has to be single"),this._screenManager=n[0],this._screenManager.runDefaultScreen(),this._defaultTransition=this._screenManager.getComponent(o),this._initialized=!0}},r.runScreeenWithDefaultTransition=function(n){var e=this;s(this._defaultTransition,"Default transition doesn't exist"),this._defaultTransition.begin().then((function(){return e.runScreen(n)})).then((function(){return e._defaultTransition.end()}))},r.runScreen=function(n){s(this._screenManager,"ScreenManager doesn't exists"),this._screenManager.runScreen(n)},t(n,null,[{key:"instance",get:function(){return this._instance||(this._instance=new this)}}]),n}(),e(l,"_instance",null),u=f))||u);r._RF.pop()}}}));

System.register("chunks:///_virtual/InputWindow.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Window.ts","./ConfirmationHelper.ts","./ListItem.ts","./ListScrollView.ts"],(function(t){"use strict";var e,i,n,r,o,l,u,a,s,c,f,d,p,_;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized,o=t.defineProperty},function(t){l=t.cclegacy,u=t._decorator,a=t.EditBox,s=t.Label,c=t.Button},function(t){f=t.default},function(t){d=t.ConfirmationHelper},function(t){p=t.ListItem},function(t){_=t.ListScrollView}],execute:function(){var m,E,h,b,L,T,D,v,I,y,g,A,w,C,N,O,x,M,F,U,P,R,z,S,V,W,H;t("InputWindowEvents",void 0),l._RF.push({},"6455ch6ENhHp4z/idbk1LT/","InputWindow",void 0);var K,k=u.ccclass,Y=u.property;!function(t){t.INPUT="input",t.DOWNLOAD_META="download_meta",t.REMOVE_META="remove_meta",t.UPDATE_DESCRIPTION="update_description",t.REMOVE_ALL_META="remove_all_meta",t.UPDATE_SHELF="update_shelf",t.REMOVE_DUPLICATES="remove_duplicates",t.CLEANUP="cleanup",t.ONLY_FAVORITES="only_favorites",t.ONLY_DELETED="only_deleted",t.CLEAR_FILTER="clear_filter",t.UPLOAD_META_FILE="upload_meta_file"}(K||(K=t("InputWindowEvents",{})));t("InputWindow",(m=k("InputWindow"),E=Y(a),h=Y(_),b=Y(a),L=Y(a),T=Y(s),D=Y(a),v=Y(c),I=Y(c),y=Y(c),g=Y(c),A=Y(c),w=Y(c),m((O=e((N=function(t){function e(){for(var e,i=arguments.length,l=new Array(i),u=0;u<i;u++)l[u]=arguments[u];return e=t.call.apply(t,[this].concat(l))||this,n(r(e),"text",O,r(e)),n(r(e),"metasList",x,r(e)),n(r(e),"description",M,r(e)),n(r(e),"shelf",F,r(e)),n(r(e),"output",U,r(e)),n(r(e),"listName",P,r(e)),n(r(e),"filterFavorites",R,r(e)),n(r(e),"filterDeleted",z,r(e)),n(r(e),"clearFilter",S,r(e)),n(r(e),"uploadMeta",V,r(e)),n(r(e),"submitUrls",W,r(e)),n(r(e),"clearUrls",H,r(e)),o(r(e),"_idx",-1),o(r(e),"_data",[]),o(r(e),"_confirm",null),e}i(e,t);var l=e.prototype;return l.start=function(){var t=this;this.description.node.on(a.EventType.EDITING_DID_ENDED,(function(e){return t.node.emit(K.UPDATE_DESCRIPTION,e.string,t._idx)})),this.shelf.node.on(a.EventType.EDITING_DID_ENDED,(function(e){return t.node.emit(K.UPDATE_SHELF,e.string,t._idx)})),this._confirm=this.getComponent(d),this.filterFavorites.node.on(c.EventType.CLICK,(function(){t.node.emit(K.ONLY_FAVORITES)})),this.filterDeleted.node.on(c.EventType.CLICK,(function(){t.node.emit(K.ONLY_DELETED)})),this.clearFilter.node.on(c.EventType.CLICK,(function(){t.node.emit(K.CLEAR_FILTER)})),this.uploadMeta.node.on(c.EventType.CLICK,(function(){t.node.emit(K.UPLOAD_META_FILE)})),this.submitUrls.node.on(c.EventType.CLICK,(function(){return t.okTouch()})),this.clearUrls.node.on(c.EventType.CLICK,(function(){t.text.string="",t.listName.string=""}))},l.okTouch=function(){this.node.emit(K.INPUT,this.text.string,this.listName.string),this.text.string="",this.listName.string=""},l.setFilesWithMetaDate=function(t,e){this._data=t,e?this.metasList.setData(t.map((function(t){return t===e?"> "+t.name:t.name}))):this.metasList.setData(t.map((function(t){return t.name}))),this._idx=0,this.bind()},l.bind=function(){if(this._data.length>0){var t,e,i=null===(t=this._data[this._idx])||void 0===t?void 0:t.description;this.description.string=i||"";var n=null===(e=this._data[this._idx])||void 0===e?void 0:e.shelf;this.shelf.string=n||""}},l.selectFileToDownload=function(t){var e=t.getComponent(p);e&&(this._idx=e.index),this.bind()},l.downloadTouch=function(){this._idx>=0&&this.node.emit(K.DOWNLOAD_META,this._idx)},l.removeTouch=function(){var t=this;this._idx>=0&&this._confirm.confirm((function(){t.node.emit(K.REMOVE_META,t._idx)}))},l.removeAllTouch=function(){var t=this;this._confirm.confirm((function(){t.node.emit(K.REMOVE_ALL_META,t._idx)}))},l.removeDuplicates=function(){this.node.emit(K.REMOVE_DUPLICATES)},l.cleanup=function(){this.node.emit(K.CLEANUP)},l.writeOutput=function(t){this.output.string=t},e}(f)).prototype,"text",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=e(N.prototype,"metasList",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=e(N.prototype,"description",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=e(N.prototype,"shelf",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=e(N.prototype,"output",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=e(N.prototype,"listName",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=e(N.prototype,"filterFavorites",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=e(N.prototype,"filterDeleted",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=e(N.prototype,"clearFilter",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=e(N.prototype,"uploadMeta",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=e(N.prototype,"submitUrls",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=e(N.prototype,"clearUrls",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=N))||C));l._RF.pop()}}}));

System.register("chunks:///_virtual/StrokeBorder.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var o,r,e,n,i,s;return{setters:[function(t){o=t.inheritsLoose},function(t){r=t.cclegacy,e=t._decorator,n=t.Graphics,i=t.UITransform,s=t.Component}],execute:function(){var c;r._RF.push({},"6d965Z41i1EWLxZpU3m6PgX","StrokeBorder",void 0);var p=e.ccclass;e.property,t("StrokeBorder",p("StrokeBorder")(c=function(t){function r(){return t.apply(this,arguments)||this}return o(r,t),r.prototype.start=function(){var t=this.getComponent(n),o=this.getComponent(i);t.rect(this.node.position.x,this.node.position.y,o.width,o.height),t.stroke()},r}(s))||c);r._RF.pop()}}}));

System.register("chunks:///_virtual/ConfirmationHelper.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./WindowDirector.ts","./ConfirmationWindow.ts"],(function(n){"use strict";var t,o,i,e,r,a,c,s;return{setters:[function(n){t=n.inheritsLoose,o=n.defineProperty,i=n.assertThisInitialized},function(n){e=n.cclegacy,r=n._decorator,a=n.Component},function(n){c=n.default},function(n){s=n.ConfirmationWindowEventType}],execute:function(){var l;e._RF.push({},"80adaSbkypKWJkSxJ6iYchC","ConfirmationHelper",void 0);var f=r.ccclass;r.property,n("ConfirmationHelper",f("ConfirmationHelper")(l=function(n){function e(){for(var t,e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return t=n.call.apply(n,[this].concat(r))||this,o(i(t),"_yesCallback",void 0),t}t(e,n);var r=e.prototype;return r.start=function(){var n=this;c.instance.getWindow("confirm").node.on(s.YES,(function(){n._yesCallback&&n._yesCallback()}))},r.confirm=function(n){this._yesCallback=n,c.instance.openWindow("confirm")},e}(a))||l);e._RF.pop()}}}));

System.register("chunks:///_virtual/TransitionBase.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(n){"use strict";var r,e,t,o,i;return{setters:[function(n){r=n.inheritsLoose,e=n.asyncToGenerator},function(n){t=n.cclegacy,o=n._decorator,i=n.Component}],execute:function(){var s;t._RF.push({},"8714bBrysJM+5ym/7HM7m2J","TransitionBase",void 0);var a=o.ccclass;o.property,n("TransitionBase",a("TransitionBase")(s=function(n){function t(){return n.apply(this,arguments)||this}r(t,n);var o=t.prototype;return o.begin=function(){var n=e(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),o.end=function(){var n=e(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),t}(i))||s);t._RF.pop()}}}));

System.register("chunks:///_virtual/Bounds.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,i,n,s,c,r;return{setters:[function(t){e=t.inheritsLoose,i=t.createClass},function(t){n=t.cclegacy,s=t.Vec2,c=t.Size,r=t.Rect}],execute:function(){n._RF.push({},"8bb35iiCmNBN7nMB2ZwnW2n","Bounds",void 0);t("Bounds",function(t){function n(){return t.apply(this,arguments)||this}return e(n,t),i(n,[{key:"contentSize",get:function(){return new s(this.size.width,this.size.y)},set:function(t){var e=this.center;this.x=e.x-t.x/2,this.y=e.y-t.y/2,this.size=new c(t.x,t.y)}},{key:"center",get:function(){return new s(this.x+this.width/2,this.y+this.height/2)},set:function(t){var e=this.center.subtract(t);this.x-=e.x,this.y-=e.y}}]),n}(r));n._RF.pop()}}}));

System.register("chunks:///_virtual/Favorite.ts",["cc"],(function(){"use strict";var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"8ea6fzePRVBRql3xzISuasv","Favorite",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/ResetWorldPosition.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,n,o,r,s,i,c,a,l;return{setters:[function(e){t=e.inheritsLoose,n=e.defineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,s=e._decorator,i=e.Vec3,c=e.view,a=e.tween,l=e.Component}],execute:function(){var u;r._RF.push({},"a0289bF6StMvLXS55c2beX1","ResetWorldPosition",void 0);var d=s.ccclass;s.property,e("ResetWorldPosition",d("ResetWorldPosition")(u=function(e){function r(){for(var t,r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return t=e.call.apply(e,[this].concat(s))||this,n(o(t),"_resetTween",null),t}t(r,e);var s=r.prototype;return s.reset=function(){this.node.worldPosition=new i(0,0,this.node.worldPosition.z)},s.start=function(){var e=this;c.on("canvas-resize",(function(){e._resetTween&&e._resetTween.stop(),e._resetTween=a(e).delay(.01).call((function(){return e.reset()})).start()})),this.reset()},r}(l))||u);r._RF.pop()}}}));

System.register("chunks:///_virtual/WindowTransitionBase.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(n){"use strict";var r,e,t,o,i;return{setters:[function(n){r=n.inheritsLoose,e=n.asyncToGenerator},function(n){t=n.cclegacy,o=n._decorator,i=n.Component}],execute:function(){var a;t._RF.push({},"a3c40z6BN9BnYVZMVUeQjBe","WindowTransitionBase",void 0);var s=o.ccclass;o.property,n("WindowTransitionBase",s("WindowTransitionBase")(a=function(n){function t(){return n.apply(this,arguments)||this}r(t,n);var o=t.prototype;return o.open=function(){var n=e(regeneratorRuntime.mark((function n(r){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:case"end":return n.stop()}}),n)})));return function(r){return n.apply(this,arguments)}}(),o.close=function(){var n=e(regeneratorRuntime.mark((function n(r){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:case"end":return n.stop()}}),n)})));return function(r){return n.apply(this,arguments)}}(),t}(i))||a);t._RF.pop()}}}));

System.register("chunks:///_virtual/LocalSettings.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var i,e,s,n,o;return{setters:[function(t){i=t.defineProperty,e=t.createClass},function(t){s=t.cclegacy,n=t._decorator,o=t.sys}],execute:function(){var a,c,r;t("InitialZoomType",void 0),s._RF.push({},"a5518ljsFVN5Z/o1HQVSMHt","LocalSettings",void 0);var l,u=n.ccclass;n.property;!function(t){t[t.CENTERED=0]="CENTERED",t[t.COMICS=1]="COMICS",t[t.FIT=2]="FIT"}(l||(l=t("InitialZoomType",{})));t("default",u("LocalSettings")((r=c=function(){function t(){i(this,"_initialized",!1),i(this,"_storageKey","settings"),i(this,"_settings",{initialZoom:l.CENTERED})}var s=t.prototype;return s.init=function(){if(!this._initialized){var t=o.localStorage.getItem(this._storageKey);(null==t?void 0:t.length)>0&&(this._settings=JSON.parse(t)),this._initialized=!0}},s.save=function(){o.localStorage.setItem(this._storageKey,JSON.stringify(this._settings))},e(t,[{key:"initialZoom",get:function(){return this._settings.initialZoom},set:function(t){this._settings.initialZoom=t,this.save()}},{key:"settings",get:function(){return Object.assign({},this._settings)},set:function(t){this._settings=t,this.save()}}],[{key:"instance",get:function(){return this._instance||(this._instance=new this)}}]),t}(),i(c,"_instance",void 0),a=r))||a);s._RF.pop()}}}));

System.register("chunks:///_virtual/MainScene.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./WindowDirector.ts","./LocalSettings.ts","./SettingsWindow.ts"],(function(n){"use strict";var t,e,i,o,c,s,a,u;return{setters:[function(n){t=n.inheritsLoose},function(n){e=n.cclegacy,i=n._decorator,o=n.game,c=n.Component},function(n){s=n.default},function(n){a=n.default},function(n){u=n.SettingsWindowEventType}],execute:function(){var r;n("MainSceneEventType",void 0),e._RF.push({},"a566e9UZdlG+Yujok5b6t7t","MainScene",void 0);var p,f=i.ccclass;i.property;!function(n){n.FILE_INPUT_REQUESTED="file_input_requested"}(p||(p=n("MainSceneEventType",{})));n("MainScene",f("MainScene")(r=function(n){function e(){return n.apply(this,arguments)||this}t(e,n);var i=e.prototype;return i.start=function(){a.instance.init(),s.instance.init(),o.frameRate=50},i.openFileInputWindow=function(){this.node.emit(p.FILE_INPUT_REQUESTED)},i.openSettings=function(){var n=s.instance.openWindow("settings");n.updateSettings(a.instance.settings),n.node.on(u.SAVE_SETTINGS,(function(n){a.instance.settings=n}))},e}(c))||r);e._RF.pop()}}}));

System.register("chunks:///_virtual/Window.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./WindowDirector.ts"],(function(t){"use strict";var n,e,i,o,s,r,a,c,d,u,h,l,O,p;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized,s=t.defineProperty,r=t.createClass},function(t){a=t.cclegacy,c=t._decorator,d=t.UITransform,u=t.Widget,h=t.Enum,l=t.log,O=t.Component},function(t){p=t.default}],execute:function(){var f,E,S,C,L,N,g;t({WindowBehaviour:void 0,WindowEventType:void 0,WindowState:void 0}),a._RF.push({},"a6b23d8nKBKCZZjQPDOsLjS","Window",void 0);var m,D,v,w=c.ccclass,_=c.property,y=c.requireComponent;!function(t){t[t.CLOSED=0]="CLOSED",t[t.OPENING=1]="OPENING",t[t.OPEN=2]="OPEN",t[t.CLOSING=3]="CLOSING"}(m||(m=t("WindowState",{}))),function(t){t[t.NORMAL=0]="NORMAL",t[t.MODAL=1]="MODAL",t[t.MODAL_MESSAGE=2]="MODAL_MESSAGE"}(D||(D=t("WindowBehaviour",{}))),function(t){t.OPENING="opening",t.OPENED="opened",t.CLOSING="closing",t.CLOSED="closed"}(v||(v=t("WindowEventType",{})));t("default",(f=w("Window"),E=y(d),S=y(u),C=_({type:h(D)}),f(L=E(L=S((g=n((N=function(t){function n(){for(var n,e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return n=t.call.apply(t,[this].concat(r))||this,i(o(n),"behaviour",g,o(n)),s(o(n),"_state",m.CLOSED),s(o(n),"_transform",null),n}e(n,t);var a=n.prototype;return a.onLoad=function(){this._transform=this.getComponent(d)},a.show=function(t){return this.getState()==m.CLOSED?(this.onOpening(),t?t.open(this.node).then(this.onOpened.bind(this)):this.onOpened(),!0):(l("Window "+this.name+" not ready to open"),!1)},a.hide=function(t){return this.getState()==m.OPEN?(this.onClosing(),t?t.close(this.node).then(this.onClosed.bind(this)):this.onClosed(),!0):(l("Window "+this.name+" not ready to close"),!1)},a.close=function(){p.instance.closeWindow(this.name)},a.getState=function(){return this._state},a.onOpening=function(){this._state=m.OPENING,this.node.active=!0,this.node.emit(v.OPENING)},a.onOpened=function(){this._state=m.OPEN,this.node.emit(v.OPENED)},a.onClosing=function(){this._state=m.CLOSING,this.node.emit(v.CLOSING)},a.onClosed=function(){this._state=m.CLOSED,this.node.emit(v.CLOSED),this.node.active=!1},r(n,[{key:"windowSize",get:function(){return this._transform.contentSize},set:function(t){this._transform.contentSize=t,this.getComponent(u).updateAlignment()}}]),n}(O)).prototype,"behaviour",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return D.MODAL}}),L=N))||L)||L)||L));a._RF.pop()}}}));

System.register("chunks:///_virtual/ScrollInput.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(i){"use strict";var t,e,l,s,r,o,n,c,h,a,v;return{setters:[function(i){t=i.applyDecoratedDescriptor,e=i.inheritsLoose,l=i.initializerDefineProperty,s=i.assertThisInitialized,r=i.defineProperty,o=i.createClass},function(i){n=i.cclegacy,c=i._decorator,h=i.Node,a=i.Vec2,v=i.Component}],execute:function(){var u,_,p,d,D,y,f,m,g,b,x;i("ScrollInputEventType",void 0),n._RF.push({},"aa32duC2GpFv7/PyKD2qu0G","ScrollInput",void 0);var w,B=c.ccclass,T=c.property;!function(i){i.UPDATE_Y="update_y",i.UPDATE_X="update_x"}(w||(w=i("ScrollInputEventType",{})));i("ScrollInput",(u=B("ScrollInput"),_=T(h),p=T(a),u((y=t((D=function(i){function t(){for(var t,e=arguments.length,o=new Array(e),n=0;n<e;n++)o[n]=arguments[n];return t=i.call.apply(i,[this].concat(o))||this,l(s(t),"touchInputPanel",y,s(t)),l(s(t),"width",f,s(t)),l(s(t),"height",m,s(t)),l(s(t),"min",g,s(t)),l(s(t),"max",b,s(t)),l(s(t),"canvasPosition",x,s(t)),r(s(t),"_scrollDiv",null),r(s(t),"_scrollBorderDiv",null),r(s(t),"_innerDiv",null),r(s(t),"_scrollBarSize",0),r(s(t),"_canvasRect",null),r(s(t),"_valueY",0),r(s(t),"_riseXTime",new Date),r(s(t),"_XRollbackTime",1e3),t}e(t,i);var n=t.prototype;return n.onLoad=function(){var i=this;this._scrollDiv=document.createElement("div"),this._scrollDiv.id="scrollDiv",this._scrollDiv.style.width=this.width+"px",this._scrollDiv.style.height=this.height+"px",this._scrollDiv.style.position="absolute",this._scrollDiv.style.left="0px",this._scrollDiv.style.top="0px",this._scrollDiv.style.overflow="scroll",this._scrollDiv.style.opacity="0",this._scrollBorderDiv=document.createElement("div"),this._scrollBorderDiv.id="scrollBorderDiv",this._scrollBorderDiv.style.width=this.width-2+"px",this._scrollBorderDiv.style.height=this.height-2+"px",this._scrollBorderDiv.style.position="absolute",this._scrollBorderDiv.style.left="0px",this._scrollBorderDiv.style.top="0px",this._scrollBorderDiv.style.border="1px solid",this._innerDiv=document.createElement("div"),this._innerDiv.style.height=this.height+"px",this._innerDiv.style.backgroundColor="red",this._innerDiv.style.backgroundImage="radial-gradient(circle, #000000 1px, rgba(0, 0, 0, 0) 1px)",this._innerDiv.style.backgroundSize="20px 20px",this._scrollDiv.appendChild(this._innerDiv),document.body.appendChild(this._scrollBorderDiv),document.body.appendChild(this._scrollDiv),this._scrollBarSize=this._scrollDiv.offsetHeight-this._scrollDiv.clientHeight,this.updateSize(),this._scrollDiv.addEventListener("scroll",(function(t){i._scrollDiv.scrollTop+i.min!=i._valueY&&(i.node.emit(w.UPDATE_Y,i._scrollDiv.scrollTop+i.min),i._valueY=i._scrollDiv.scrollTop+i.min);var e=new Date;1!=i._scrollDiv.scrollLeft&&e.getTime()-i._riseXTime.getTime()>i._XRollbackTime&&(i._riseXTime=e,i.node.emit(w.UPDATE_X,i._scrollDiv.scrollLeft-1)),i._scrollDiv.scrollLeft=1})),this._scrollDiv.addEventListener("mousemove",(function(i){})),this.node.on(h.EventType.SIZE_CHANGED,this.updateSize.bind(this))},n.updateSize=function(){var i=document.getElementById("GameCanvas");this._canvasRect=i.getBoundingClientRect(),this._scrollDiv.style.width=this.width+"px",this._scrollDiv.style.height=this.height+"px",this._innerDiv.style.width=this.width-this._scrollBarSize+3+"px",this._innerDiv.style.height=this._scrollDiv.offsetHeight-this._scrollBarSize+(this.max-this.min)+"px",this._scrollDiv.style.left=this._canvasRect.x+this.canvasPosition.x*(this._canvasRect.width-this._scrollDiv.offsetWidth)+"px",this._scrollDiv.style.top=this._canvasRect.y+(1-this.canvasPosition.y)*(this._canvasRect.height-this._scrollDiv.offsetHeight)+"px",this._scrollBorderDiv.style.width=this.width-2+"px",this._scrollBorderDiv.style.height=this.height-2+"px",this._scrollBorderDiv.style.left=this._scrollDiv.style.left,this._scrollBorderDiv.style.top=this._scrollDiv.style.top,this._scrollDiv.scrollLeft=1},o(t,[{key:"valueY",get:function(){return this._scrollDiv.scrollTop+this.min},set:function(i){this._valueY=Math.round(i),this._scrollDiv.scrollTop=Math.round(i)-this.min}}]),t}(v)).prototype,"touchInputPanel",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=t(D.prototype,"width",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),m=t(D.prototype,"height",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),g=t(D.prototype,"min",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),b=t(D.prototype,"max",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 860}}),x=t(D.prototype,"canvasPosition",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new a(1,0)}}),d=D))||d));n._RF.pop()}}}));

System.register("chunks:///_virtual/DockPanel.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var i,e,n,o,a,s,r,c,h,d,T,l;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized,a=t.defineProperty},function(t){s=t.cclegacy,r=t._decorator,c=t.Widget,h=t.Enum,d=t.UITransform,T=t.tween,l=t.Component}],execute:function(){var u,p,m,g,w,f,b,k;t("DockSide",void 0),s._RF.push({},"adafePO+81E7bv6kGc0PzoB","DockPanel",void 0);var O,S=r.ccclass,_=r.property;!function(t){t[t.TOP=0]="TOP",t[t.LEFT=1]="LEFT",t[t.BOTTOM=2]="BOTTOM",t[t.RIGHT=3]="RIGHT"}(O||(O=t("DockSide",{})));t("DockPanel",(u=S("DockPanel"),p=_(c),m=_({type:h(O)}),u((f=i((w=function(t){function i(){for(var i,e=arguments.length,s=new Array(e),r=0;r<e;r++)s[r]=arguments[r];return i=t.call.apply(t,[this].concat(s))||this,n(o(i),"widget",f,o(i)),n(o(i),"animationTime",b,o(i)),n(o(i),"dockSide",k,o(i)),a(o(i),"_contentSize",void 0),a(o(i),"_isOpened",!1),i}e(i,t);var s=i.prototype;return s.onLoad=function(){var t=this.node.getComponent(d);if(this._contentSize=t.contentSize,!this._isOpened)switch(this.dockSide){case O.LEFT:this.widget.left=-this._contentSize.width;break;case O.RIGHT:this.widget.right=-this._contentSize.width;break;case O.TOP:this.widget.top=-this._contentSize.height;break;case O.BOTTOM:this.widget.bottom=-this._contentSize.height}},s.show=function(){switch(this.dockSide){case O.LEFT:T(this.widget).to(this.animationTime,{left:0}).start();break;case O.RIGHT:T(this.widget).to(this.animationTime,{right:0}).start();break;case O.TOP:T(this.widget).to(this.animationTime,{top:0}).start();break;case O.BOTTOM:T(this.widget).to(this.animationTime,{bottom:0}).start()}},s.hide=function(){switch(this.dockSide){case O.LEFT:T(this.widget).to(this.animationTime,{left:-this._contentSize.width}).start();break;case O.RIGHT:T(this.widget).to(this.animationTime,{right:-this._contentSize.width}).start();break;case O.TOP:T(this.widget).to(this.animationTime,{top:-this._contentSize.height}).start();break;case O.BOTTOM:T(this.widget).to(this.animationTime,{bottom:-this._contentSize.height}).start()}},s.setOpened=function(t){this._isOpened=t},i}(l)).prototype,"widget",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=i(w.prototype,"animationTime",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.2}}),k=i(w.prototype,"dockSide",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return O.LEFT}}),g=w))||g));s._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerCameraManager.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Bounds.ts","./ScrollInput.ts"],(function(t){"use strict";var i,e,o,n,s,r,a,h,c,l,u,p,m,_,g,d,f,z,P,S,y,b,v;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,o=t.initializerDefineProperty,n=t.assertThisInitialized,s=t.defineProperty,r=t.createClass},function(t){a=t.cclegacy,h=t._decorator,c=t.Node,l=t.Camera,u=t.Label,p=t.Vec2,m=t.Vec3,_=t.view,g=t.UITransform,d=t.Size,f=t.clamp,z=t.misc,P=t.log,S=t.Component},function(t){y=t.Bounds},function(t){b=t.ScrollInput,v=t.ScrollInputEventType}],execute:function(){var w,x,M,I,T,D,H,L,E,O,R,C,V,A,U,B,Y,k,F,N,W,X;a._RF.push({},"afd5fAT8NFPTZQf1meXq080","PlayerCameraManager",void 0);var Z=h.ccclass,q=h.property;t("PlayerCameraManager",(w=Z("PlayerCameraManager"),x=q(c),M=q(l),I=q(c),T=q(b),D=q(u),w((E=i((L=function(t){function i(){for(var i,e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return i=t.call.apply(t,[this].concat(r))||this,o(n(i),"zoomMin",E,n(i)),o(n(i),"zoomStep",O,n(i)),o(n(i),"zoomDuration",R,n(i)),o(n(i),"panSpeed",C,n(i)),o(n(i),"deceleration",V,n(i)),o(n(i),"panMoveDelta",A,n(i)),o(n(i),"smoothPan",U,n(i)),o(n(i),"panEndAcceleration",B,n(i)),o(n(i),"touchInputPanel",Y,n(i)),o(n(i),"camera",k,n(i)),o(n(i),"limits",F,n(i)),o(n(i),"scrollInput",N,n(i)),o(n(i),"limitCamera",W,n(i)),o(n(i),"currentScale",X,n(i)),s(n(i),"_zoomMax",800),s(n(i),"_startPosition",void 0),s(n(i),"_currentPanSpeed",new p),s(n(i),"_panEnd",!1),s(n(i),"_scrollOrtographicSize",0),s(n(i),"_epsilon",.01),s(n(i),"_zooming",!1),s(n(i),"_panning",!1),s(n(i),"_zoomDetecting",!1),s(n(i),"_zoomPanDirection",new m),s(n(i),"_cameraLimits",void 0),s(n(i),"_aspectRatio",void 0),s(n(i),"_mousePosition",new p),s(n(i),"_previousDistance",0),s(n(i),"_touches",[]),s(n(i),"_fistTouchId",-1),i}e(i,t);var a=i.prototype;return a.start=function(){var t=this;this.touchInputPanel&&(this.touchInputPanel.on(c.EventType.TOUCH_START,this.onTouchBegan,this,!0),this.touchInputPanel.on(c.EventType.TOUCH_END,this.onTouchEnded,this,!0),this.touchInputPanel.on(c.EventType.TOUCH_MOVE,this.onTouchMove,this,!0),this.touchInputPanel.on(c.EventType.MOUSE_WHEEL,this.onMouseWheel,this,!0),this.touchInputPanel.on(c.EventType.MOUSE_MOVE,this.onMouseMove,this,!0)),this._scrollOrtographicSize=this.orthoHeight,this._aspectRatio=_.getVisibleSizeInPixel().width/_.getVisibleSizeInPixel().height,this.scrollInput.node.on(v.UPDATE_Y,(function(i){t.orthoHeight=i,t._scrollOrtographicSize=t.orthoHeight}));var i=this.limits.getComponent(g);this.setLimits(new y(this.limits.position.x-i.width*i.anchorX,this.limits.position.y-i.height*i.anchorY,i.width,i.height)),_.on("canvas-resize",(function(){t._aspectRatio=_.getVisibleSizeInPixel().width/_.getVisibleSizeInPixel().height,t.updateLimits()}))},a.updateLimits=function(){var t=new d(_.getVisibleSizeInPixel().width/devicePixelRatio,_.getVisibleSizeInPixel().height/devicePixelRatio),i=this._cameraLimits.width/t.width,e=this._cameraLimits.height/t.height;this._zoomMax=e>i?Math.max(this._cameraLimits.height/2,t.height/2):Math.max(this._cameraLimits.width/this._aspectRatio/2,t.width/this._aspectRatio/2),this.scrollInput.min=this.zoomMin,this.scrollInput.max=this._zoomMax,this.scrollInput.updateSize(),this.scrollInput.valueY=this.orthoHeight},a.setLimits=function(t){this._cameraLimits=t,this.updateLimits()},a.scrollBy=function(t,i){if(!this._zooming){var e=t>0?t:1/Math.abs(t),o=this._scrollOrtographicSize*e;if(o=f(o,this.zoomMin,this._zoomMax),this._scrollOrtographicSize==o)return;if(this._scrollOrtographicSize=o,i){var n=this.camera.convertToUINode(new m(this.worldMousePosition.x,this.worldMousePosition.y,0),this.touchInputPanel),s=2*n.x/(_.getVisibleSizeInPixel().width/devicePixelRatio),r=2*n.y/(_.getVisibleSizeInPixel().height/devicePixelRatio);this._zoomPanDirection=new m(s*this._aspectRatio,r,0).multiplyScalar(-Math.sign(t))}this._currentPanSpeed.multiplyScalar(e),this._zooming=!0}},a.onMouseWheel=function(t){this.scrollBy(z.clampf(t.getScrollY(),-1,1)*this.zoomStep*-1,!0)},a.readTouches=function(t){var i=this;if(this._mousePosition=t.touch.getLocation(),this._touches=t.getAllTouches(),this._touches.length>1?(this._zoomDetecting||(this._fistTouchId=this._touches.filter((function(i){return i.getID()!=t.touch.getID()}))[0].getID(),this._previousDistance=0,P("Start zoom detection "+this._fistTouchId)),this._zoomDetecting=!0):this._zoomDetecting=!1,-1!=this._fistTouchId){var e=this._touches.find((function(t){return t.getID()==i._fistTouchId}));e?this._mousePosition=e.getLocation():this._fistTouchId=-1}},a.onTouchBegan=function(t){this.readTouches(t),this._startPosition=this.worldMousePosition,this._panEnd=!1,this._panning=!0},a.onTouchEnded=function(t){this._panEnd=!0;var i=this.smoothPan?1:this.panEndAcceleration;this._currentPanSpeed=p.subtract(new p,this._startPosition,this.worldMousePosition).multiplyScalar(i)},a.zoom=function(t){var i=this._scrollOrtographicSize-this.orthoHeight,e=Math.sign(i),o=1*t/this.zoomDuration*this._scrollOrtographicSize/(e/2+1.5);if(this.orthoHeight+=e*o,i=this._scrollOrtographicSize-this.orthoHeight,0!=this._zoomPanDirection.x||0!=this._zoomPanDirection.y){m.multiplyScalar(new m,this._zoomPanDirection,o);this.camera.node.position=this.camera.node.position.add(m.multiplyScalar(new m,this._zoomPanDirection,o))}(i>-this._epsilon&&i<this._epsilon||e!=Math.sign(i))&&(this.orthoHeight=this._scrollOrtographicSize,this._zoomPanDirection=new m,this._zooming=!1)},a.pan=function(t){if(this._panEnd){var i=Math.sign(this._currentPanSpeed.x),e=new p(this._currentPanSpeed).normalize();this._currentPanSpeed.x-=this.deceleration*e.x*t,i!=Math.sign(this._currentPanSpeed.x)&&(this._currentPanSpeed.x=0),i=Math.sign(this._currentPanSpeed.y),this._currentPanSpeed.y-=this.deceleration*e.y*t,i!=Math.sign(this._currentPanSpeed.y)&&(this._currentPanSpeed.y=0)}else this._currentPanSpeed=p.subtract(new p,this._startPosition,this.worldMousePosition);this.limitCamera&&(2*this.orthoHeight*this._aspectRatio>=this._cameraLimits.width&&(this._currentPanSpeed.x=0-this.camera.node.position.x),2*this.orthoHeight>=this._cameraLimits.height&&(this._currentPanSpeed.y=0-this.camera.node.position.y));var o=this.smoothPan||this._panEnd?t*this.panSpeed:1;this.camera.node.position.add(new m(this._currentPanSpeed.x,this._currentPanSpeed.y,0).multiplyScalar(o));var n=new m(this.camera.node.position);this.cameraPosition=this.camera.node.position,this.camera.node.position.x!=n.x&&(this._currentPanSpeed.x=0),this.camera.node.position.y!=n.y&&(this._currentPanSpeed.y=0),this._panEnd&&this._currentPanSpeed.lengthSqr()<this._epsilon*this._epsilon&&(this._panning=!1)},a.zoomDetection=function(){if(this._touches.length>1){var t=p.distance(this._touches[0].getLocation(),this._touches[1].getLocation()),i=t-this._previousDistance;(i>this._epsilon||i<-this._epsilon)&&0!=this._previousDistance&&(this.orthoHeight*=this._previousDistance/t,this.orthoHeight=z.clampf(this.orthoHeight,this.zoomMin,this._zoomMax)),this._previousDistance=t}},a.update=function(t){this._zooming&&this.zoom(t),this._panning&&this.pan(t),this._zoomDetecting&&this.zoomDetection()},a.onTouchMove=function(t){this.readTouches(t)},a.onTouchCancelled=function(t){P("Touch canceled"),this.readTouches(t)},a.onMouseMove=function(t){this._mousePosition.x=t.getLocationX(),this._mousePosition.y=t.getLocationY()},a.setZoom=function(t){this.orthoHeight=_.getVisibleSizeInPixel().height/devicePixelRatio*.5/t,this._scrollOrtographicSize=this.orthoHeight},a.setFitZoom=function(){this.orthoHeight=this._zoomMax},a.setPercentPosition=function(t){var i=new m(this._cameraLimits.x+t.x*this._cameraLimits.width,this._cameraLimits.y+t.y*this._cameraLimits.height,this.node.position.z);this.cameraPosition=i},r(i,[{key:"worldMousePosition",get:function(){var t=this.camera.screenToWorld(new m(this._mousePosition.x,this._mousePosition.y,0));return new p(t.x,t.y)}},{key:"orthoHeight",get:function(){return this.camera.orthoHeight},set:function(t){this.camera.orthoHeight=t,this.currentScale.string=Math.round(_.getVisibleSizeInPixel().height/devicePixelRatio*50/this.camera.orthoHeight)+"%",this.scrollInput.valueY=this.orthoHeight,this.cameraPosition=this.camera.node.position}},{key:"cameraPosition",set:function(t){var i=new y(this._cameraLimits);if(i.contentSize=i.contentSize.subtract(new p(2*this.orthoHeight*this._aspectRatio,2*this.orthoHeight)),i.size.x<0){var e=i.size;e.x=0,i.contentSize=new p(e.x,e.y)}if(i.size.y<0){var o=i.size;o.y=0,i.contentSize=new p(o.x,o.y)}this.camera.node.position=new m(z.clampf(t.x,i.xMin,i.xMax),z.clampf(t.y,i.yMin,i.yMax),this.camera.node.position.z)}}]),i}(S)).prototype,"zoomMin",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),O=i(L.prototype,"zoomStep",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),R=i(L.prototype,"zoomDuration",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.2}}),C=i(L.prototype,"panSpeed",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.2}}),V=i(L.prototype,"deceleration",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 4}}),A=i(L.prototype,"panMoveDelta",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.01}}),U=i(L.prototype,"smoothPan",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),B=i(L.prototype,"panEndAcceleration",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),Y=i(L.prototype,"touchInputPanel",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=i(L.prototype,"camera",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=i(L.prototype,"limits",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=i(L.prototype,"scrollInput",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=i(L.prototype,"limitCamera",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),X=i(L.prototype,"currentScale",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=L))||H));a._RF.pop()}}}));

System.register("chunks:///_virtual/ContentManager.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./WindowDirector.ts","./Window.ts","./CustomToggleButton.ts","./DropListButton.ts","./LocalSettings.ts","./StringUtils.ts","./FileInput.ts","./DOMHelper.ts","./FileMetaProvider.ts","./FavoritesProvider.ts","./ListScrollView.ts","./FavoritesWindow.ts","./InputWindow.ts","./Bounds.ts","./MainScene.ts","./ScrollInput.ts","./PlayerCameraManager.ts","./PaginatedListScrollView.ts","./PhotoDownloader.ts"],(function(t){"use strict";var e,i,n,a,o,r,s,d,l,u,h,c,_,p,f,m,v,I,g,x,w,P,E,D,F,W,S,L,b,T,y,M,O,C,N,A,B,V;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,a=t.assertThisInitialized,o=t.defineProperty,r=t.createForOfIteratorHelperLoose},function(t){s=t.cclegacy,d=t._decorator,l=t.Sprite,u=t.Label,h=t.log,c=t.UITransform,_=t.Vec2,p=t.Vec3,f=t.Component},function(t){m=t.default},function(t){v=t.WindowEventType},function(t){I=t.CustomToggleButton},function(t){g=t.DropListButton,x=t.DropListButtonEventType},function(t){w=t.default,P=t.InitialZoomType},function(t){E=t.hashCode},function(t){D=t.FileInput},function(t){F=t.downloadTextFromBrowser},function(t){W=t.FileMetaProvider},function(t){S=t.FavoritesProvider},function(t){L=t.ListScrollViewEvent},function(t){b=t.FavoritesWindowEventType},function(t){T=t.InputWindowEvents},function(t){y=t.Bounds},function(t){M=t.MainScene,O=t.MainSceneEventType},function(t){C=t.ScrollInput,N=t.ScrollInputEventType},function(t){A=t.PlayerCameraManager},function(t){B=t.PaginatedListScrollView},function(t){V=t.PhotoDownloader}],execute:function(){var R,z,U,k,Z,J,j,H,Y,q,X,G,K,Q,$,tt,et,it,nt,at,ot,rt,st,dt,lt;s._RF.push({},"b4c25lpY2ZMyJ+W/r1pRudw","ContentManager",void 0);var ut=d.ccclass,ht=d.property;t("ContentManager",(R=ut("ContentManager"),z=ht(B),U=ht(V),k=ht(D),Z=ht(l),J=ht(A),j=ht(C),H=ht(u),Y=ht(u),q=ht(I),X=ht(I),G=ht(g),R(($=e((Q=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r))||this,n(a(e),"listScroll",$,a(e)),n(a(e),"photoDownloader",tt,a(e)),n(a(e),"textFileInput",et,a(e)),n(a(e),"targetSprite",it,a(e)),n(a(e),"camera",nt,a(e)),n(a(e),"scrollInput",at,a(e)),n(a(e),"currentIndex",ot,a(e)),n(a(e),"fileName",rt,a(e)),n(a(e),"likeButon",st,a(e)),n(a(e),"deleteButon",dt,a(e)),n(a(e),"favoritesButton",lt,a(e)),o(a(e),"_inputWindow",void 0),o(a(e),"_data",[]),o(a(e),"_fileData",[]),o(a(e),"_selectedIdx",0),o(a(e),"_mapIndex",null),o(a(e),"_metaProvider",null),o(a(e),"_meta",null),o(a(e),"_favoritesProvider",null),o(a(e),"_useInPlaceDelete",!0),e}i(e,t);var s=e.prototype;return s.start=function(){var t=this;this._metaProvider=new W,this._favoritesProvider=new S,this._inputWindow=m.instance.getWindow("input"),this._metaProvider.onDataChanged=function(){t._inputWindow.setFilesWithMetaDate(t._metaProvider.entities,t._meta)},this._inputWindow.node.on(T.INPUT,(function(e,i){e.length>0&&m.instance.closeWindow("input"),t.processData(e,i)})),this._inputWindow.node.on(T.DOWNLOAD_META,(function(e){var i=t._metaProvider.entities;if(e<i.length){var n=i[e];n&&F(n.name+".json",n.toJSON())}})),this._inputWindow.node.on(T.REMOVE_META,(function(e){var i=t._metaProvider.entities;if(e<i.length){var n=i[e];t._metaProvider.removeFileMeta(n),n===t._meta&&(t._meta=t._metaProvider.getFileMeta(t._meta.name,t._meta.idData))}})),this._inputWindow.node.on(T.UPDATE_DESCRIPTION,(function(e,i){var n=t._metaProvider.entities;i<n.length&&(n[i].description=e)})),this._inputWindow.node.on(T.UPDATE_SHELF,(function(e,i){var n=t._metaProvider.entities;i<n.length&&(n[i].shelf=e)})),this._inputWindow.node.on(T.REMOVE_ALL_META,(function(e,i){t._metaProvider.removeAllData()})),this._inputWindow.node.on(T.REMOVE_DUPLICATES,(function(){t.removeDuplicates()})),this._inputWindow.node.on(T.CLEANUP,(function(){})),this._inputWindow.node.on(T.ONLY_FAVORITES,(function(){t.filter(!0)})),this._inputWindow.node.on(T.ONLY_DELETED,(function(){t.filter(!1)})),this._inputWindow.node.on(T.CLEAR_FILTER,(function(){t.clearFilter()})),this._inputWindow.node.on(T.UPLOAD_META_FILE,(function(){t.textFileInput.request().then((function(e){t._metaProvider.addOrUpdate(t.textFileInput.currentFileName,e)}))})),this.listScroll.node.on(L.SELECT_ITEM,(function(e){t.loadPhotoWithIdx(e)})),this.getComponent(M).node.on(O.FILE_INPUT_REQUESTED,(function(){t.textFileInput.request().then((function(e){t.processData(e,t.textFileInput.currentFileName),t.fileName.string=t.textFileInput.currentFileName}))})),this.scrollInput.node.on(N.UPDATE_X,(function(e){h("JOYSTICK X "+e),e>0?t.next():e<1&&t.previous()})),this.favoritesButton.node.on(x.ITEM_SELECTED,this.toggleFavoritesList.bind(this));var e=m.instance.getWindow("favorites");e&&(e.node.on(b.ADD_NEW_LIST,(function(e){t._favoritesProvider.getMetaDataEntity(e)})),e.node.on(b.REMOVE_LIST,(function(e){t._favoritesProvider.removeMetaDataEntityWithName(e)})),e.node.on(b.RENAME_LIST,(function(e,i){t._favoritesProvider.renameMetaDataEntityWithName(e,i)})),e.node.on(b.DOWNLOAD_ALL_FAVORITES,(function(){F("favorites.json",t._favoritesProvider.toJSON())})),e.node.on(b.UPLOAD_SEVERAL_FAVORITES,(function(){t.textFileInput.request().then((function(e){t._favoritesProvider.addFromJSON(e)}))})),e.node.on(v.OPENING,(function(){e.setLists(t._favoritesProvider.names)})),this._favoritesProvider.onDataChanged=function(){e.setLists(t._favoritesProvider.names),t.updateFavorites()}),this.updateFavorites()},s.populateScrollView=function(){if(this._meta){var t=this._meta.deleted.map((function(t){return{index:t,deleted:!0}}));this.listScroll.setData(this._data,t)}else this.listScroll.setData(this._data)},s.clearFilter=function(){this._data=this._fileData,this._mapIndex=null,this.populateScrollView(),this._meta.currentIndex>=0&&this._meta.currentIndex<this._data.length&&this.loadPhotoWithIdx(this._meta.currentIndex)},s.filter=function(t){var e=this;this._mapIndex?this._data=this._fileData:this._fileData=this._data,this._mapIndex=[];var i=t?this._meta.favorites:this._meta.deleted,n=0;this._data=this._data.filter((function(t,a){return!(i.indexOf(a)<0)&&(e._mapIndex.push({index:n++,id:a,deleted:!1}),!0)})),this.listScroll.setData(this._data,this._mapIndex),this._data.length>0&&this.loadPhotoWithIdx(0)},s.removeDuplicates=function(){var t;if(!((null===(t=this._data)||void 0===t?void 0:t.length)<=0)){for(var e=[],i=new Map,n=[],a=0;a<this._data.length-1;a++)for(var o=a+1;o<this._data.length;o++){var s=void 0;e[a]?s=e[a]:(s=E(this._data[a]),e[a]=s);var d=void 0;e[o]?d=e[o]:(d=E(this._data[o]),e[o]=d),s==d&&(i.has(s)?i.get(s).push(o):i.set(s,[a,o]),n.push(o))}if(this._useInPlaceDelete){n.sort((function(t,e){return e-t}));for(var l=0;l<n.length;l++){var u=n[l];this._data.splice(u,1),this._meta.deletePermanently(u,!1)}}else{var c=this._data.filter((function(t,e){return n.indexOf(e)<0}));this._data=c;for(var _,p=r(n);!(_=p()).done;){var f=_.value;this._meta.deletePermanently(f,!1)}}this._meta.makeNameFull(),this._metaProvider.save(),this.populateScrollView(),h(n),this._inputWindow.writeOutput("Deleted "+n.length+" urls");var m=this._data.join("\r\n");F(this._meta.name,m)}},s.updateFavorites=function(){var t=this;this._data.length>0?this.favoritesButton.setData(this._favoritesProvider.entities.map((function(e,i){return{name:e.name,id:i,markered:e.has(t._data[t._selectedIdx])}}))):this.favoritesButton.setData(this._favoritesProvider.names.map((function(t,e){return{id:e,name:t}})))},s.loadPhotoWithIdx=function(t){var e=this;t<this._data.length&&(this._selectedIdx=t,this.currentIndex.string=this._selectedIdx+1+"/"+this._data.length,this.photoDownloader.downloadPhoto(this._data[t]).then((function(t){e.targetSprite.spriteFrame=t.spriteFrame,e.targetSprite.node.getComponent(c).setContentSize(t.width,t.height);switch(e.camera.setLimits(new y(-t.width/2-70,-t.height/2-70,t.width+140,t.height+140)),w.instance.initialZoom){case P.CENTERED:e.camera.node.position=new p(0,0,e.camera.node.position.z),e.camera.setZoom(1);break;case P.FIT:e.camera.node.position=new p(0,0,e.camera.node.position.z),e.camera.setFitZoom();break;case P.COMICS:e.camera.setZoom(1),e.camera.setPercentPosition(new _(0,1))}e.imageLoaded()})))},s.imageLoaded=function(){var t=this._mapIndex&&this._selectedIdx<this._mapIndex.length?this._mapIndex[this._selectedIdx].id:this._selectedIdx;this._meta&&(this.likeButon.isChecked=this._meta.isLiked(t),this.deleteButon.isChecked=this._meta.isDeleted(t),null==this._mapIndex&&(this._meta.currentIndex=this._selectedIdx)),this.updateFavorites()},s.processData=function(t,i){this._data=t.split(/\r?\n/),this.trimEmptyEnd(),i&&(this._meta=this._metaProvider.getFileMeta(i,e.getFileIdData(this._data))),this.populateScrollView(),this._meta&&this._meta.currentIndex>=0&&this._meta.currentIndex<this._data.length?this.loadPhotoWithIdx(this._meta.currentIndex):this.loadPhotoWithIdx(0)},s.trimEmptyEnd=function(){for(;this._data[this._data.length-1].length<=0;)this._data.pop()},s.next=function(){var t=this._selectedIdx+1;if(!this._mapIndex)for(;this._meta&&this._meta.deleted.indexOf(t)>=0;)++t;t<this._data.length&&this.loadPhotoWithIdx(t)},s.previous=function(){var t=this._selectedIdx-1;if(!this._mapIndex)for(;this._meta&&this._meta.deleted.indexOf(t)>=0;)--t;t>=0&&this.loadPhotoWithIdx(t)},s.setZoom=function(t,e){this.camera.setZoom(e)},s.makeFavorite=function(){if(this._meta){var t=this._mapIndex&&this._selectedIdx<this._mapIndex.length?this._mapIndex[this._selectedIdx].id:this._selectedIdx;this._meta.isLiked(t)?this._meta.removeFromFavorites(t):this._meta.addFavoriteWithIdx(t,this._data[this._selectedIdx])}},s.deleteCurrent=function(){if(this._meta){var t=this._mapIndex&&this._selectedIdx<this._mapIndex.length?this._mapIndex[this._selectedIdx].id:this._selectedIdx;this._meta.isDeleted(t)?this._meta.restore(t):this._meta.delete(t)}},s.openInputWindow=function(){m.instance.openWindow("input"),this._inputWindow.setFilesWithMetaDate(this._metaProvider.entities,this._meta)},s.openFavoritesWindow=function(){m.instance.openWindow("favorites")},s.toggleFavoritesList=function(t){if(this._data.length>0){var e=this._favoritesProvider.getMetaDataEntity(t.name);e.has(this._data[this._selectedIdx])?e.removeFromFavoritesUrl(this._data[this._selectedIdx]):e.addFavoriteWithIdx(this._selectedIdx,this._data[this._selectedIdx])}},e.getFileIdData=function(t){for(var e=0,i={firstUrls:[]};e<t.length&&e<3;)i.firstUrls.push(t[e++]);return i},e}(f)).prototype,"listScroll",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),tt=e(Q.prototype,"photoDownloader",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),et=e(Q.prototype,"textFileInput",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),it=e(Q.prototype,"targetSprite",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),nt=e(Q.prototype,"camera",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),at=e(Q.prototype,"scrollInput",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ot=e(Q.prototype,"currentIndex",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),rt=e(Q.prototype,"fileName",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),st=e(Q.prototype,"likeButon",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),dt=e(Q.prototype,"deleteButon",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),lt=e(Q.prototype,"favoritesButton",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=Q))||K));s._RF.pop()}}}));

System.register("chunks:///_virtual/Cover.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,r,o,n,i,c,l,a,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,o=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){i=e.cclegacy,c=e._decorator,l=e.Toggle,a=e.Node,u=e.Component}],execute:function(){var s,p,g,v,f,y,d;i._RF.push({},"bd830Gx3gZFZ5w86g0gBH2q","Cover",void 0);var h=c.ccclass,b=c.property;e("Cover",(s=h("Cover"),p=b(l),g=b(a),s((y=t((f=function(e){function t(){for(var t,r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return t=e.call.apply(e,[this].concat(i))||this,o(n(t),"toggle",y,n(t)),o(n(t),"cover",d,n(t)),t}return r(t,e),t.prototype.onLoad=function(){var e=this;this.toggle.node.on(l.EventType.TOGGLE,(function(t){e.cover.active=e.toggle.isChecked}))},t}(u)).prototype,"toggle",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=t(f.prototype,"cover",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=f))||v));i._RF.pop()}}}));

System.register("chunks:///_virtual/MetaData.ts",["cc"],(function(){"use strict";var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"bde0ehln+RJT6aRFFWy3LIj","MetaData",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/PaginatedListScrollView.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./ListScrollView.ts"],(function(t){"use strict";var e,i,a,n,r,l,s,o,c,u;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,a=t.initializerDefineProperty,n=t.assertThisInitialized,r=t.defineProperty},function(t){l=t.cclegacy,s=t._decorator,o=t.Component},function(t){c=t.ListScrollView,u=t.ListScrollViewEvent}],execute:function(){var p,g,h,f,P,d,S,m;l._RF.push({},"c0635F5grpDSaP3jpMUNipe","PaginatedListScrollView",void 0);var y=s.ccclass,w=s.property;t("PaginatedListScrollView",(p=y("PaginatedListScrollView"),g=w(c),h=w(c),p((d=e((P=function(t){function e(){for(var e,i=arguments.length,l=new Array(i),s=0;s<i;s++)l[s]=arguments[s];return e=t.call.apply(t,[this].concat(l))||this,a(n(e),"listScroll",d,n(e)),a(n(e),"paginator",S,n(e)),a(n(e),"itemsOnPage",m,n(e)),r(n(e),"_data",[]),e}i(e,t);var l=e.prototype;return l.start=function(){var t=this;this.paginator.node.on(u.SELECT_ITEM,(function(e){t.setPage(e)}))},l.setData=function(t,e){this._data=t;var i=Math.ceil(t.length/this.itemsOnPage),a=new Array(i).fill(1).map((function(t,e){return String(e+1)}));this.paginator.setData(a),this.setPage(0,e)},l.setPage=function(t,e){var i=this.itemsOnPage*t,a=i+this.itemsOnPage>this._data.length?this._data.length:i+this.itemsOnPage;this.listScroll.setData(this._data.slice(this.itemsOnPage*t,a),i,e)},e}(o)).prototype,"listScroll",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=e(P.prototype,"paginator",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=e(P.prototype,"itemsOnPage",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),f=P))||f));l._RF.pop()}}}));

System.register("chunks:///_virtual/DropList.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./DropListItemButton.ts"],(function(t){"use strict";var e,i,r,o,n,s,a,u,c,l,f,p,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,r=t.defineProperty,o=t.assertThisInitialized,n=t.initializerDefineProperty,s=t.createForOfIteratorHelperLoose},function(t){a=t.cclegacy,u=t._decorator,c=t.Prefab,l=t.assert,f=t.instantiate,p=t.Component},function(t){h=t.DropListItemButton}],execute:function(){var m,d,v,_,L;a._RF.push({},"c65fdSxNdxGxJu8TU1UX1Tv","DropList",void 0);var b=u.ccclass,y=u.property;t("DropList",(m=b("DropList"),d=y(c),m((L=e((_=function(t){function e(){for(var e,i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return e=t.call.apply(t,[this].concat(s))||this,r(o(e),"_items",void 0),r(o(e),"_itemButtons",void 0),n(o(e),"itemPrefab",L,o(e)),e}i(e,t);var a=e.prototype;return a.onLoad=function(){l(this.itemPrefab,"Prefab not found")},a.setData=function(t){this._items=t,this._itemButtons=[],this.node.removeAllChildren();for(var e,i=s(this._items);!(e=i()).done;){var r=e.value,o=f(this.itemPrefab),n=o.getComponent(h);o.parent=this.node,n.onLoad(),n.setItem(r),this._itemButtons.push(n)}},a.show=function(){this._itemButtons&&(this._itemButtons.forEach((function(t){null==t||t.reset()})),this.node.active=!0)},a.getSelected=function(){if(this._itemButtons)for(var t,e=s(this._itemButtons);!(t=e()).done;){var i=t.value;if(i.isSelected())return i.getItem()}return null},e}(p)).prototype,"itemPrefab",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=_))||v));a._RF.pop()}}}));

System.register("chunks:///_virtual/StringUtils.ts",["cc"],(function(t){"use strict";var c;return{setters:[function(t){c=t.cclegacy}],execute:function(){t("hashCode",(function(t){for(var c=0,e=0;e<t.length;e++)c=Math.imul(31,c)+t.charCodeAt(e)|0;return c})),c._RF.push({},"cfc51nttsdKwozQFsILiGxI","StringUtils",void 0),c._RF.pop()}}}));

System.register("chunks:///_virtual/PanelManager.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./CustomToggleButton.ts","./DockPanel.ts"],(function(e){"use strict";var t,n,o,r,a,i,l,u,c,s,g,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty,o=e.inheritsLoose,r=e.assertThisInitialized,a=e.createForOfIteratorHelperLoose},function(e){i=e.cclegacy,l=e._decorator,u=e.Component,c=e.Toggle},function(e){s=e.CustomToggleButton,g=e.CustomToggleButtonState},function(e){p=e.DockPanel}],execute:function(){var f,h,P,d,y,b,v,D,k,m,T,z,O;i._RF.push({},"d1a7aBaoZ1I0a+yQXqjPz+X","PanelManager",void 0);var w=l.ccclass,L=l.property,M=e("ToggleDockPanel",(f=w("ToggleDockPanel"),h=L(s),P=L(p),f((b=t((y=function(){n(this,"toggle",b,this),n(this,"panel",v,this)}).prototype,"toggle",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=t(y.prototype,"panel",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=y))||d));e("PanelManager",(D=w("PanelManager"),k=L([M]),D((z=t((T=function(e){function t(){for(var t,o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return t=e.call.apply(e,[this].concat(a))||this,n(r(t),"toggleDockPanels",z,r(t)),n(r(t),"hidePanelsOnStart",O,r(t)),t}return o(t,e),t.prototype.onLoad=function(){for(var e,t=this,n=function(){var n=e.value,o=n.panel;n.toggle.node.on(c.EventType.TOGGLE,(function(e){e.isChecked?o.show():o.hide()})),t.hidePanelsOnStart&&(o.setOpened(!1),n.toggle.setState(g.NORMAL,!1))},o=a(this.toggleDockPanels);!(e=o()).done;)n()},t}(u)).prototype,"toggleDockPanels",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),O=t(T.prototype,"hidePanelsOnStart",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),m=T))||m));i._RF.pop()}}}));

System.register("chunks:///_virtual/DropListButton.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./DropList.ts"],(function(t){"use strict";var n,e,i,o,s,c,h,r,u;return{setters:[function(t){n=t.inheritsLoose,e=t.defineProperty,i=t.assertThisInitialized},function(t){o=t.cclegacy,s=t._decorator,c=t.Button,h=t.Node,r=t.Component},function(t){u=t.DropList}],execute:function(){var a;t("DropListButtonEventType",void 0),o._RF.push({},"d2753vg7/5AEbPWa9CAjttN","DropListButton",void 0);var d,l=s.ccclass,p=(s.property,s.requireComponent);!function(t){t.ITEM_SELECTED="item_selected"}(d||(d=t("DropListButtonEventType",{})));t("DropListButton",l("DropListButton")(a=p(c)(a=function(t){function o(){for(var n,o=arguments.length,s=new Array(o),c=0;c<o;c++)s[c]=arguments[c];return n=t.call.apply(t,[this].concat(s))||this,e(i(n),"_list",null),e(i(n),"_data",null),n}n(o,t);var s=o.prototype;return s.onLoad=function(){this._list=this.getComponentInChildren(u),this._list.onLoad(),this.node.on(h.EventType.TOUCH_START,this.onTouchBegan,this),this.node.on(h.EventType.TOUCH_END,this.onTouchEnded,this),this.node.on(h.EventType.TOUCH_CANCEL,this.onTouchCanceled,this)},s.onTouchBegan=function(){this._list.show()},s.onTouchEnded=function(){this.hideListAndCheckSelection()},s.onTouchCanceled=function(){this.hideListAndCheckSelection()},s.hideListAndCheckSelection=function(){this._list.node.active=!1,this._list.getSelected()&&this.node.emit(d.ITEM_SELECTED,this._list.getSelected())},s.setData=function(t){this._data=t,this._list.setData(this._data)},o}(r))||a)||a);o._RF.pop()}}}));

System.register("chunks:///_virtual/ListScrollView.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./ListItem.ts"],(function(e){"use strict";var t,i,n,o,r,l,s,c,a,d,u,f,p,h,v,_,m,E;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized,r=e.defineProperty,l=e.createClass},function(e){s=e.cclegacy,c=e._decorator,a=e.ScrollView,d=e.Node,u=e.Prefab,f=e.find,p=e.assert,h=e.instantiate,v=e.Vec2,_=e.Component},function(e){m=e.ListItem,E=e.ListItemEvent}],execute:function(){var L,w,S,g,I,C,y,b;e("ListScrollViewEvent",void 0),s._RF.push({},"d33dd/o0jROwIxM5fd52GwI","ListScrollView",void 0);var T,V=c.ccclass,N=c.property,x=c.requireComponent;!function(e){e.SELECT_ITEM="select_item",e.SELECT_SINGLE_ITEM="select_single_item"}(T||(T=e("ListScrollViewEvent",{})));e("ListScrollView",(L=V("ListScrollView"),w=x(a),S=N(d),g=N(u),L(I=w((y=t((C=function(e){function t(){for(var t,i=arguments.length,l=new Array(i),s=0;s<i;s++)l[s]=arguments[s];return t=e.call.apply(e,[this].concat(l))||this,n(o(t),"contentNode",y,o(t)),n(o(t),"itemPrefab",b,o(t)),r(o(t),"_scrollView",null),r(o(t),"_idx",0),t}i(t,e);var s=t.prototype;return s.onLoad=function(){this._scrollView=this.getComponent(a),this.contentNode||(this.contentNode=f("view/content",this.node)),p(this.contentNode,"Can't find content node")},s.setData=function(e,t,i){var n,o=this;this.contentNode.removeAllChildren();for(var r=0;r<e.length;r++){var l=null==i?void 0:i.find((function(e){return e.index===r}));if(!l||!l.deleted){var s=e[r],c=h(this.itemPrefab);c.parent=this.contentNode;var a=c.getComponent(m);a&&(a.init(),t?a.setString(r+t,s,l):a.setString(r,s,l),a.node.on(E.SELECT,(function(e,t){o.node.emit(T.SELECT_ITEM,e)})))}}null===(n=this._scrollView)||void 0===n||n.scrollTo(new v(0,1))},s.selectItem=function(e){var t=e.getComponent(m);t&&(this._idx=t.index,this.node.emit(T.SELECT_SINGLE_ITEM,this._idx))},l(t,[{key:"selectedIndex",get:function(){return this._idx}}]),t}(_)).prototype,"contentNode",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=t(C.prototype,"itemPrefab",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=C))||I)||I));s._RF.pop()}}}));

System.register("chunks:///_virtual/CocosTemplateScrollFix.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var o,t,c,r;return{setters:[function(e){o=e.inheritsLoose},function(e){t=e.cclegacy,c=e._decorator,r=e.Component}],execute:function(){var n;t._RF.push({},"e0bc34amDJLLYX2I2STuSMG","CocosTemplateScrollFix",void 0);var l=c.ccclass;c.property,e("CocosTemplateScrollFix",l("CocosTemplateScrollFix")(n=function(e){function t(){return e.apply(this,arguments)||this}return o(t,e),t.prototype.onLoad=function(){document.getElementById("GameDiv").style.border="0px"},t}(r))||n);t._RF.pop()}}}));

System.register("chunks:///_virtual/ToggleNoCheckmark.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,o,r,n,c,i,a,l,s;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){c=e.cclegacy,i=e._decorator,a=e.Node,l=e.Toggle,s=e.Component}],execute:function(){var u,k,p,h,g;c._RF.push({},"e196cGXIVtPo7c6mDw7kgPk","ToggleNoCheckmark",void 0);var m=i.ccclass,f=i.property;e("ToggleNoCheckmark",(u=m("ToggleNoCheckmark"),k=f(a),u((g=t((h=function(e){function t(){for(var t,o=arguments.length,c=new Array(o),i=0;i<o;i++)c[i]=arguments[i];return t=e.call.apply(e,[this].concat(c))||this,r(n(t),"noCheckmark",g,n(t)),t}return o(t,e),t.prototype.start=function(){var e=this;this.node.getComponent(l)&&this.node.on(l.EventType.TOGGLE,(function(t){var o=t;o&&e.noCheckmark&&(e.noCheckmark.active=!o.isChecked)}))},t}(s)).prototype,"noCheckmark",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=h))||p));c._RF.pop()}}}));

System.register("chunks:///_virtual/Favorites.ts",["cc"],(function(){"use strict";var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"ea34fXEaMxMtaVWSh8tft6w","Favorites",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/PhotoDownloader.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,r,o,i,n,a,h,u,c,s,l,p,d,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,o=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){n=e.cclegacy,a=e._decorator,h=e.Sprite,u=e.assetManager,c=e.SpriteFrame,s=e.Texture2D,l=e.UITransform,p=e.error,d=e.log,g=e.Component}],execute:function(){var w,f,m,v,S;n._RF.push({},"ef08boU05JLQYSWPExaVN7c","PhotoDownloader",void 0);var y=a.ccclass,P=a.property;e("PhotoDownloader",(w=y("PhotoDownloader"),f=P(h),w((S=t((v=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return t=e.call.apply(e,[this].concat(n))||this,o(i(t),"targetSprite",S,i(t)),t}r(t,e);var n=t.prototype;return n.start=function(){},n.downloadAndShow=function(e){var t=this;u.loadRemote(e,(function(e,r){var o=r,i=new c,n=new s;n.image=o,i.texture=n,t.targetSprite.spriteFrame=i,t.targetSprite.node.getComponent(l).setContentSize(o.width,o.height)}))},n.downloadPhoto=function(e){return new Promise((function(t,r){u.loadRemote(e,(function(e,o){if(e)return p(e.message),void r(e);var i=o,n=new c,a=new s;a.image=i,n.texture=a,d("image width "+i.width+" height "+i.height+" texture width "+a.width+" height "+a.height),t({spriteFrame:n,width:i.width,height:i.height})}))}))},t}(g)).prototype,"targetSprite",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=v))||m));n._RF.pop()}}}));

System.register("chunks:///_virtual/CustomToggleButton.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,i,n,o,s,a,r,u,l,c,h,E,d;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.defineProperty,o=t.assertThisInitialized,s=t.initializerDefineProperty,a=t.createClass},function(t){r=t.cclegacy,u=t._decorator,l=t.Button,c=t.Node,h=t.assert,E=t.Toggle,d=t.Component}],execute:function(){var p,g,T,f,m,C,v,b;t({CustomToggleButtonEventType:void 0,CustomToggleButtonState:void 0}),r._RF.push({},"f27d1EF1F1KO5DVy9O+vHMA","CustomToggleButton",void 0);var S,y,L=u.ccclass,_=u.property,B=u.requireComponent;!function(t){t.SELECTED="touch"}(S||(S=t("CustomToggleButtonEventType",{}))),function(t){t.NORMAL="normal",t.SELECTED="selected",t.INACTIVE="inactive"}(y||(y=t("CustomToggleButtonState",{})));t("CustomToggleButton",(p=L("CustomToggleButton"),g=B(l),T=_(c),f=_(c),p(m=g((v=e((C=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return e=t.call.apply(t,[this].concat(a))||this,n(o(e),"_initialized",!1),n(o(e),"_button",null),n(o(e),"_buttonState",y.NORMAL),s(o(e),"selected",v,o(e)),s(o(e),"normal",b,o(e)),e}i(e,t);var r=e.prototype;return r.init=function(){var t=this;h(this.selected,"Can't find state of quiz button"),this._button=this.getComponent(l),h(this._button,"Button has to be"),this.node.on(l.EventType.CLICK,(function(e){t.buttonState==y.NORMAL?t.setState(y.SELECTED):t.buttonState==y.SELECTED&&t.setState(y.NORMAL)})),this._initialized=!0},r.onLoad=function(){this._initialized||this.init()},r.setState=function(t,e){switch(void 0===e&&(e=!0),this._initialized||this.init(),this._buttonState=t,t){case y.NORMAL:this.selected.active=!1,this.normal&&(this.normal.active=!0),e&&this.node.emit(E.EventType.TOGGLE,this);break;case y.SELECTED:this.selected.active=!0,this.normal&&(this.normal.active=!1),e&&this.node.emit(E.EventType.TOGGLE,this);break;case y.INACTIVE:this.selected.active=!1,this.normal&&(this.normal.active=!1)}},a(e,[{key:"buttonState",get:function(){return this._buttonState}},{key:"isChecked",get:function(){return this._buttonState==y.SELECTED},set:function(t){this.setState(t?y.SELECTED:y.NORMAL)}}]),e}(d)).prototype,"selected",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=e(C.prototype,"normal",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=C))||m)||m));r._RF.pop()}}}));

System.register("chunks:///_virtual/DropListItemButton.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./CustomToggleButton.ts"],(function(t){"use strict";var e,n,o,i,s,r,u,a,l,c,h,f,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized,s=t.defineProperty},function(t){r=t.cclegacy,u=t._decorator,a=t.Node,l=t.Label,c=t.log,h=t.Component},function(t){f=t.CustomToggleButton,p=t.CustomToggleButtonState}],execute:function(){var E,g,m,d,_;r._RF.push({},"f57c589aJ9NVaC9xD+ufLtz","DropListItemButton",void 0);var T=u.ccclass,v=u.property;t("DropListItemButton",(E=T("DropListItemButton"),g=v(a),E((_=e((d=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),u=0;u<n;u++)r[u]=arguments[u];return e=t.call.apply(t,[this].concat(r))||this,o(i(e),"marker",_,i(e)),s(i(e),"_item",null),s(i(e),"_labels",null),s(i(e),"_toggle",null),e}n(e,t);var r=e.prototype;return r.onLoad=function(){this._labels=this.getComponentsInChildren(l),this._toggle=this.getComponent(f)},r.reset=function(){this._toggle.setState(p.NORMAL)},r.onMouseEnter=function(t){this._toggle.setState(p.SELECTED)},r.onMouseLeave=function(t){this._toggle.setState(p.NORMAL)},r.onEnable=function(){this.node.on(a.EventType.TOUCH_END,this.onTouchEnded,this),this.node.on(a.EventType.MOUSE_ENTER,this.onMouseEnter,this),this.node.on(a.EventType.MOUSE_LEAVE,this.onMouseLeave,this)},r.onDisable=function(){this.node.off(a.EventType.TOUCH_END,this.onTouchEnded,this),this.node.off(a.EventType.MOUSE_ENTER,this.onMouseEnter,this),this.node.off(a.EventType.MOUSE_LEAVE,this.onMouseLeave,this)},r.onTouchEnded=function(t){c(this._item.name)},r.setItem=function(t){this._item=t,this._labels.forEach((function(e){return e.string=t.name})),this.marker&&(this.marker.active=!!t.markered)},r.getItem=function(){return this._item},r.isSelected=function(){return this._toggle.isChecked},e}(h)).prototype,"marker",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=d))||m));r._RF.pop()}}}));

System.register("chunks:///_virtual/BlackFadeTransition.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./TransitionBase.ts"],(function(t){"use strict";var n,r,i,e,a,o,c,s,u,l,p;return{setters:[function(t){n=t.applyDecoratedDescriptor,r=t.inheritsLoose,i=t.initializerDefineProperty,e=t.assertThisInitialized},function(t){a=t.cclegacy,o=t._decorator,c=t.Sprite,s=t.assert,u=t.tween,l=t.Color},function(t){p=t.TransitionBase}],execute:function(){var f,h,d,v,y;a._RF.push({},"f65c5enThtBIbb0g799PfqO","BlackFadeTransition",void 0);var B=o.ccclass,T=o.property;t("BlackFadeTransition",(f=B("BlackFadeTransition"),h=T(c),f((y=n((v=function(t){function n(){for(var n,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return n=t.call.apply(t,[this].concat(a))||this,i(e(n),"curtain",y,e(n)),n}r(n,t);var a=n.prototype;return a.begin=function(){var t=this;return s(this.curtain,"No curtain"),new Promise((function(n){u(t.curtain).to(.15,{color:l.BLACK}).call(n).start()}))},a.end=function(){var t=this;return s(this.curtain,"No curtain"),new Promise((function(n){u(t.curtain).to(.15,{color:new l(0,0,0,0)}).call(n).start()}))},n}(p)).prototype,"curtain",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=v))||d));a._RF.pop()}}}));

System.register("chunks:///_virtual/ScreenManager.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var r,n,t,i,c,a,o,u,l,s;return{setters:[function(e){r=e.applyDecoratedDescriptor,n=e.initializerDefineProperty,t=e.inheritsLoose,i=e.assertThisInitialized,c=e.defineProperty,a=e.createForOfIteratorHelperLoose},function(e){o=e.cclegacy,u=e._decorator,l=e.Node,s=e.Component}],execute:function(){var f,p,S,h,b,d,y,g,v,m,_,z;o._RF.push({},"f6951eDGS5KLar180caEqSX","ScreenManager",void 0);var w=u.ccclass,D=u.property,M=e("ScreenNode",(f=w("ScreenNode"),p=D(l),f((b=r((h=function(){n(this,"name",b,this),n(this,"screen",d,this)}).prototype,"name",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),d=r(h.prototype,"screen",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=h))||S));e("ScreenManager",(y=w("ScreenManager"),g=D([M]),y((_=r((m=function(e){function r(){for(var r,t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return r=e.call.apply(e,[this].concat(a))||this,n(i(r),"screens",_,i(r)),n(i(r),"defaultScreen",z,i(r)),c(i(r),"_currentScreen",null),r}t(r,e);var o=r.prototype;return o.runDefaultScreen=function(){this.runScreen(this.defaultScreen)},o.runScreen=function(e){for(var r,n=a(this.screens);!(r=n()).done;){var t=r.value;t.name==e?(t.screen.active=!0,this._currentScreen=t.screen):t.screen.active=!1}},r}(s)).prototype,"screens",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),z=r(m.prototype,"defaultScreen",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),v=m))||v));o._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./WindowTransitionBase.ts","./WindowManager.ts","./WindowDirector.ts","./Window.ts","./ConfirmationWindow.ts","./CustomToggleButton.ts","./DropListItemButton.ts","./DropList.ts","./DropListButton.ts","./TestDropListButton.ts","./FadeWindowTransition.ts","./LocalSettings.ts","./SettingsWindow.ts","./StringUtils.ts","./MetaDataEntity.ts","./FileInput.ts","./DOMHelper.ts","./FileMetaProvider.ts","./FavoritesProvider.ts","./ConfirmationHelper.ts","./ListItem.ts","./ListScrollView.ts","./FavoritesWindow.ts","./FileIdentificationData.ts","./ScreenManager.ts","./TransitionBase.ts","./ScreenDirector.ts","./InputWindow.ts","./StrokeBorder.ts","./Bounds.ts","./Favorite.ts","./ResetWorldPosition.ts","./MainScene.ts","./ScrollInput.ts","./DockPanel.ts","./PlayerCameraManager.ts","./PaginatedListScrollView.ts","./PhotoDownloader.ts","./ContentManager.ts","./Cover.ts","./MetaData.ts","./PanelManager.ts","./CocosTemplateScrollFix.ts","./ToggleNoCheckmark.ts","./Favorites.ts","./BlackFadeTransition.ts"],(function(){"use strict";return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});